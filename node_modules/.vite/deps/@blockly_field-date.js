import {
  require_blockly_compressed
} from "./chunk-37NJYYKB.js";
import {
  __commonJS
} from "./chunk-PLDDJCW6.js";

// node_modules/@blockly/field-date/dist/index.js
var require_dist = __commonJS({
  "node_modules/@blockly/field-date/dist/index.js"(exports, module) {
    !(function(e, t) {
      if ("object" == typeof exports && "object" == typeof module) module.exports = t(require_blockly_compressed());
      else if ("function" == typeof define && define.amd) define(["blockly/core"], t);
      else {
        var r = "object" == typeof exports ? t(require_blockly_compressed()) : t(e.Blockly);
        for (var o in r) ("object" == typeof exports ? exports : e)[o] = r[o];
      }
    })(exports, (e) => (() => {
      "use strict";
      var t = { 370: (t2) => {
        t2.exports = e;
      } }, r = {};
      function o(e2) {
        var n2 = r[e2];
        if (void 0 !== n2) return n2.exports;
        var i2 = r[e2] = { exports: {} };
        return t[e2](i2, i2.exports, o), i2.exports;
      }
      o.d = (e2, t2) => {
        for (var r2 in t2) o.o(t2, r2) && !o.o(e2, r2) && Object.defineProperty(e2, r2, { enumerable: true, get: t2[r2] });
      }, o.o = (e2, t2) => Object.prototype.hasOwnProperty.call(e2, t2), o.r = (e2) => {
        "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e2, Symbol.toStringTag, { value: "Module" }), Object.defineProperty(e2, "__esModule", { value: true });
      };
      var n = {};
      o.r(n), o.d(n, { FieldDate: () => l, isISOFormat: () => a, toLocalISOString: () => d });
      var i = o(370);
      class l extends i.FieldTextInput {
        constructor(e2, t2, r2) {
          super(e2, t2, r2), this.SERIALIZABLE = true;
        }
        static fromJson(e2) {
          const { date: t2 } = e2;
          return new this(t2, void 0, (function(e3, t3) {
            var r2 = {};
            for (var o2 in e3) Object.prototype.hasOwnProperty.call(e3, o2) && t3.indexOf(o2) < 0 && (r2[o2] = e3[o2]);
            if (null != e3 && "function" == typeof Object.getOwnPropertySymbols) {
              var n2 = 0;
              for (o2 = Object.getOwnPropertySymbols(e3); n2 < o2.length; n2++) t3.indexOf(o2[n2]) < 0 && Object.prototype.propertyIsEnumerable.call(e3, o2[n2]) && (r2[o2[n2]] = e3[o2[n2]]);
            }
            return r2;
          })(e2, ["date"]));
        }
        doClassValidation_(e2) {
          if (!e2) return null;
          const t2 = "string" == typeof e2 ? new Date(e2) : null;
          return !t2 || isNaN(t2.getTime()) ? null : a(e2) ? e2 : d(t2);
        }
        getText_() {
          const e2 = this.getValue();
          return e2 ? (function(e3) {
            var t2;
            const r2 = new Date(e3), o2 = null !== (t2 = navigator.language) && void 0 !== t2 ? t2 : "en-US";
            return new Intl.DateTimeFormat(o2, { timeZone: "UTC" }).format(r2);
          })(e2) : null;
        }
        render_() {
          super.render_();
        }
        showEditor_(e2) {
          var t2, r2;
          super.showEditor_(e2, true), null === (t2 = this.htmlInput_) || void 0 === t2 || t2.focus({ preventScroll: true }), null === (r2 = this.htmlInput_) || void 0 === r2 || r2.select(), this.showDropdown();
        }
        updateSize_(e2) {
          super.updateSize_((null != e2 ? e2 : 0) + 20);
        }
        showDropdown() {
          this.htmlInput_ && (i.utils.dom.addClass(this.htmlInput_, "blocklyDateInput"), window.requestAnimationFrame(() => {
            this.htmlInput_.showPicker();
          }));
        }
        widgetCreate_() {
          const e2 = super.widgetCreate_();
          return e2.type = "date", e2;
        }
      }
      function a(e2) {
        const t2 = e2.match(/\d\d\d\d-\d\d-\d\d/);
        return null !== t2 && t2[0] === t2.input;
      }
      function d(e2) {
        return e2.toLocaleDateString("en-US").replace(/(\d+)\/(\d+)\/(\d+)/, "$3-$1-$2").replace(/-(\d)(?!\d)/g, "-0$1");
      }
      return i.utils.userAgent.MAC && i.Css.register("\ninput.blocklyDateInput::-webkit-datetime-edit,\ninput.blocklyDateInput::-webkit-datetime-edit-month-field,\ninput.blocklyDateInput::-webkit-datetime-edit-day-field,\ninput.blocklyDateInput::-webkit-datetime-edit-year-field {\n  padding: 0;\n}\n"), i.fieldRegistry.register("field_date", l), l.prototype.DEFAULT_VALUE = d(/* @__PURE__ */ new Date()), n;
    })());
  }
});
export default require_dist();
/*! Bundled license information:

@blockly/field-date/dist/index.js:
  (*! For license information please see index.js.LICENSE.txt *)
*/
//# sourceMappingURL=@blockly_field-date.js.map
