{
  "version": 3,
  "sources": ["webpack://@blockly/zoom-to-fit/webpack/universalModuleDefinition", "webpack://@blockly/zoom-to-fit/external%20umd%20%7B%22root%22:%22Blockly%22,%22commonjs%22:%22blockly/core%22,%22commonjs2%22:%22blockly/core%22,%22amd%22:%22blockly/core%22%7D", "webpack://@blockly/zoom-to-fit/webpack/bootstrap", "webpack://@blockly/zoom-to-fit/webpack/runtime/compat%20get%20default%20export", "webpack://@blockly/zoom-to-fit/webpack/runtime/define%20property%20getters", "webpack://@blockly/zoom-to-fit/webpack/runtime/hasOwnProperty%20shorthand", "webpack://@blockly/zoom-to-fit/webpack/runtime/make%20namespace%20object", "webpack://@blockly/zoom-to-fit/src/index.ts"],
  "sourcesContent": ["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"blockly/core\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"blockly/core\"], factory);\n\telse {\n\t\tvar a = typeof exports === 'object' ? factory(require(\"blockly/core\")) : factory(root[\"Blockly\"]);\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(this, (__WEBPACK_EXTERNAL_MODULE__370__) => {\nreturn ", "module.exports = __WEBPACK_EXTERNAL_MODULE__370__;", "// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n", "// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};", "// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};", "__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))", "// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};", "/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport * as Blockly from 'blockly/core';\n\n/**\n * Class for zoom to fit control.\n */\nexport class ZoomToFitControl implements Blockly.IPositionable {\n  /**\n   * The unique id for this component.\n   */\n  id = 'zoomToFit';\n\n  /**\n   * The SVG group containing the zoom-to-fit control.\n   */\n  private svgGroup: SVGElement | null = null;\n\n  /**\n   * Left coordinate of the zoom-to-fit control.\n   */\n  private left = 0;\n\n  /**\n   * Top coordinate of the zoom-to-fit control.\n   */\n  private top = 0;\n\n  /**\n   * Width of the zoom-to-fit control.\n   */\n  private readonly width = 32;\n\n  /**\n   * Height of the zoom-to-fit control.\n   */\n  private readonly height = 32;\n\n  /**\n   * Distance between zoom-to-fit control and bottom or top edge of workspace.\n   */\n  private readonly marginVertical = 20;\n\n  /**\n   * Distance between zoom-to-fit control and right or left edge of workspace.\n   */\n  private readonly marginHorizontal = 20;\n\n  /**\n   * Whether this has been initialized.\n   */\n  private initialized = false;\n\n  private onZoomToFitWrapper: Blockly.browserEvents.Data | null = null;\n\n  /**\n   * Constructor for zoom-to-fit control.\n   *\n   * @param workspace The workspace that the zoom-to-fit\n   *     control will be added to.\n   */\n  constructor(protected workspace: Blockly.WorkspaceSvg) {}\n\n  /**\n   * Initializes the zoom reset control.\n   */\n  init() {\n    this.workspace.getComponentManager().addComponent({\n      component: this,\n      weight: 2,\n      capabilities: [Blockly.ComponentManager.Capability.POSITIONABLE],\n    });\n    this.createDom();\n    this.initialized = true;\n    this.workspace.resize();\n  }\n  /**\n   * Disposes of workspace search.\n   * Unlink from all DOM elements and remove all event listeners\n   * to prevent memory leaks.\n   */\n  dispose() {\n    if (this.svgGroup) {\n      Blockly.utils.dom.removeNode(this.svgGroup);\n    }\n    if (this.onZoomToFitWrapper) {\n      Blockly.browserEvents.unbind(this.onZoomToFitWrapper);\n      this.onZoomToFitWrapper = null;\n    }\n  }\n\n  /**\n   * Creates DOM for ui element.\n   */\n  private createDom() {\n    this.svgGroup = Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.IMAGE,\n      {\n        height: `${this.height}px`,\n        width: `${this.width}px`,\n        class: 'zoomToFit',\n      },\n    );\n    this.svgGroup.setAttributeNS(\n      Blockly.utils.dom.XLINK_NS,\n      'xlink:href',\n      zoomToFitSvgDataUri,\n    );\n\n    Blockly.utils.dom.insertAfter(\n      this.svgGroup,\n      this.workspace.getBubbleCanvas(),\n    );\n\n    // Attach listener.\n    this.onZoomToFitWrapper = Blockly.browserEvents.conditionalBind(\n      this.svgGroup,\n      'pointerdown',\n      null,\n      this.onClick.bind(this),\n    );\n  }\n\n  /**\n   * Handle click event.\n   *\n   * @param e A pointer down event.\n   */\n  private onClick(e: PointerEvent) {\n    this.workspace.zoomToFit();\n    const uiEvent = new (Blockly.Events.get(Blockly.Events.CLICK))(\n      null,\n      this.workspace.id,\n      'zoom_reset_control',\n    );\n    Blockly.Events.fire(uiEvent);\n    e.stopPropagation(); // avoid to also fire workspace click event\n    e.preventDefault();\n  }\n\n  /**\n   * Returns the bounding rectangle of the UI element in pixel units relative to\n   * the Blockly injection div.\n   *\n   * @returns The componentâ€™s bounding box.\n   */\n  getBoundingRectangle(): Blockly.utils.Rect {\n    return new Blockly.utils.Rect(\n      this.top,\n      this.top + this.height,\n      this.left,\n      this.left + this.width,\n    );\n  }\n\n  /**\n   * Positions the zoom-to-fit control.\n   * It is positioned in the opposite corner to the corner the\n   * categories/toolbox starts at.\n   *\n   * @param metrics The workspace metrics.\n   * @param savedPositions List of rectangles that\n   *     are already on the workspace.\n   */\n  position(\n    metrics: Blockly.MetricsManager.UiMetrics,\n    savedPositions: Blockly.utils.Rect[],\n  ) {\n    if (!this.initialized) {\n      return;\n    }\n    const hasVerticalScrollbars =\n      this.workspace.scrollbar &&\n      this.workspace.scrollbar.canScrollHorizontally();\n    const hasHorizontalScrollbars =\n      this.workspace.scrollbar &&\n      this.workspace.scrollbar.canScrollVertically();\n\n    if (\n      metrics.toolboxMetrics.position === Blockly.TOOLBOX_AT_LEFT ||\n      (this.workspace.horizontalLayout && !this.workspace.RTL)\n    ) {\n      // Right corner placement.\n      this.left =\n        metrics.absoluteMetrics.left +\n        metrics.viewMetrics.width -\n        this.width -\n        this.marginHorizontal;\n      if (hasVerticalScrollbars && !this.workspace.RTL) {\n        this.left -= Blockly.Scrollbar.scrollbarThickness;\n      }\n    } else {\n      // Left corner placement.\n      this.left = this.marginHorizontal;\n      if (hasVerticalScrollbars && this.workspace.RTL) {\n        this.left += Blockly.Scrollbar.scrollbarThickness;\n      }\n    }\n\n    const startAtBottom =\n      metrics.toolboxMetrics.position !== Blockly.TOOLBOX_AT_BOTTOM;\n    if (startAtBottom) {\n      // Bottom corner placement\n      this.top =\n        metrics.absoluteMetrics.top +\n        metrics.viewMetrics.height -\n        this.height -\n        this.marginVertical;\n      if (hasHorizontalScrollbars) {\n        // The horizontal scrollbars are always positioned on the bottom.\n        this.top -= Blockly.Scrollbar.scrollbarThickness;\n      }\n    } else {\n      // Upper corner placement\n      this.top = metrics.absoluteMetrics.top + this.marginVertical;\n    }\n\n    // Check for collision and bump if needed.\n    let boundingRect = this.getBoundingRectangle();\n    for (let i = 0, otherEl; (otherEl = savedPositions[i]); i++) {\n      if (boundingRect.intersects(otherEl)) {\n        if (startAtBottom) {\n          // Bump up.\n          this.top = otherEl.top - this.height - this.marginVertical;\n        } else {\n          // Bump down.\n          this.top = otherEl.bottom + this.marginVertical;\n        }\n        // Recheck other savedPositions\n        boundingRect = this.getBoundingRectangle();\n        i = -1;\n      }\n    }\n\n    this.svgGroup?.setAttribute(\n      'transform',\n      `translate(${this.left}, ${this.top})`,\n    );\n  }\n}\n\n/**\n * Base64 encoded data uri for zoom to fit icon.\n */\nconst zoomToFitSvgDataUri =\n  'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC' +\n  '9zdmciIGhlaWdodD0iMjRweCIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMjRweCIgZm' +\n  'lsbD0iIzU0NkU3QSI+PHBhdGggZD0iTTAgMGgyNHYyNEgwVjB6IiBmaWxsPSJub25lIi8+PH' +\n  'BhdGggZD0iTTUgNi40Mkw4LjA5IDkuNSA5LjUgOC4wOSA2LjQxIDVIOVYzSDN2Nmgyem0xMC' +\n  '0zLjQxdjJoMi41N0wxNC41IDguMDlsMS40MSAxLjQxTDE5IDYuNDFWOWgyVjMuMDF6bTQgMT' +\n  'QuNTdsLTMuMDktMy4wOC0xLjQxIDEuNDFMMTcuNTkgMTlIMTV2Mmg2di02aC0yek04LjA5ID' +\n  'E0LjVMNSAxNy41OVYxNUgzdjZoNnYtMkg2LjQybDMuMDgtMy4wOXoiLz48L3N2Zz4=';\n\nBlockly.Css.register(`\n.zoomToFit {\n  opacity: 0.4;\n}\n.zoomToFit:hover {\n  opacity: 0.6;\n}\n.zoomToFit:active {\n  opacity: 0.8;\n}\n`);\n"],
  "mappings": "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",
  "names": ["root", "factory", "exports", "module", "require", "define", "amd", "a", "i", "this", "__WEBPACK_EXTERNAL_MODULE__370__", "__webpack_module_cache__", "__webpack_require__", "moduleId", "cachedModule", "__webpack_modules__", "n", "getter", "__esModule", "t", "d", "definition", "key", "o", "Object", "defineProperty", "enumerable", "get", "obj", "prop", "prototype", "hasOwnProperty", "call", "r", "Symbol", "toStringTag", "value", "ZoomToFitControl", "workspace", "id", "svgGroup", "left", "top", "width", "height", "marginVertical", "marginHorizontal", "initialized", "onZoomToFitWrapper", "init", "getComponentManager", "addComponent", "component", "weight", "capabilities", "Capability", "POSITIONABLE", "createDom", "resize", "dispose", "dom", "removeNode", "unbind", "createSvgElement", "Svg", "IMAGE", "class", "setAttributeNS", "XLINK_NS", "zoomToFitSvgDataUri", "insertAfter", "getBubbleCanvas", "conditionalBind", "onClick", "bind", "e", "zoomToFit", "uiEvent", "CLICK", "fire", "stopPropagation", "preventDefault", "getBoundingRectangle", "Rect", "metrics", "savedPositions", "hasVerticalScrollbars", "scrollbar", "canScrollHorizontally", "hasHorizontalScrollbars", "canScrollVertically", "toolboxMetrics", "position", "horizontalLayout", "RTL", "absoluteMetrics", "viewMetrics", "scrollbarThickness", "startAtBottom", "boundingRect", "otherEl", "intersects", "bottom", "setAttribute", "register"]
}
