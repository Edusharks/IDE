{
  "version": 3,
  "sources": ["webpack://@blockly/workspace-backpack/webpack/universalModuleDefinition", "webpack://@blockly/workspace-backpack/external%20umd%20%7B%22root%22:%22Blockly%22,%22commonjs%22:%22blockly/core%22,%22commonjs2%22:%22blockly/core%22,%22amd%22:%22blockly/core%22%7D", "webpack://@blockly/workspace-backpack/webpack/bootstrap", "webpack://@blockly/workspace-backpack/webpack/runtime/define%20property%20getters", "webpack://@blockly/workspace-backpack/webpack/runtime/hasOwnProperty%20shorthand", "webpack://@blockly/workspace-backpack/webpack/runtime/make%20namespace%20object", "webpack://@blockly/workspace-backpack/src/msg.ts", "webpack://@blockly/workspace-backpack/src/ui_events.ts", "webpack://@blockly/workspace-backpack/src/backpackable.ts", "webpack://@blockly/workspace-backpack/src/backpack.ts", "webpack://@blockly/workspace-backpack/src/options.ts", "webpack://@blockly/workspace-backpack/src/backpack_helpers.ts"],
  "sourcesContent": ["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"blockly/core\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"blockly/core\"], factory);\n\telse {\n\t\tvar a = typeof exports === 'object' ? factory(require(\"blockly/core\")) : factory(root[\"Blockly\"]);\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(this, (__WEBPACK_EXTERNAL_MODULE__370__) => {\nreturn ", "module.exports = __WEBPACK_EXTERNAL_MODULE__370__;", "// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n", "// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};", "__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))", "// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};", "/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Translatable messages used in backpack.\n * @author kozbial@google.com (Monica Kozbial)\n */\n\nimport * as Blockly from 'blockly/core';\n\n// context menu - Copy all Blocks on the workspace to the backpack.\nBlockly.Msg['COPY_ALL_TO_BACKPACK'] = 'Copy All Blocks to Backpack';\n// context menu - Copy the selected Block to the backpack.\nBlockly.Msg['COPY_TO_BACKPACK'] = 'Copy to Backpack';\n// context menu - Empty the backpack.\nBlockly.Msg['EMPTY_BACKPACK'] = 'Empty';\n// context menu - Paste all Blocks from the backpack to the workspace.\nBlockly.Msg['PASTE_ALL_FROM_BACKPACK'] = 'Paste All Blocks from Backpack';\n// context menu - Remove the selected Block from the backpack.\nBlockly.Msg['REMOVE_FROM_BACKPACK'] = 'Remove from Backpack';\n", "/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview UI events used for the backpack plugin.\n * @author kozbial@google.com (Monica Kozbial)\n */\n\nimport * as Blockly from 'blockly/core';\n\n/**\n * Name of event that records a backpack open.\n */\nexport const backpackOpen = 'backpack_open';\n\n/**\n * A UI event representing a backpack opening or closing.\n */\nexport class BackpackOpen extends Blockly.Events.UiBase {\n  /**\n   * Type of this event.\n   */\n  type = backpackOpen;\n\n  /**\n   * Class for a backpack open event.\n   *\n   * @param isOpen Whether the backpack flyout is opening (false\n   *    if closing). Undefined for a blank event.\n   * @param workspaceId The workspace identifier for this event.\n   *    Undefined for a blank event.\n   */\n  constructor(\n    public isOpen?: boolean,\n    workspaceId?: string,\n  ) {\n    super(workspaceId);\n  }\n\n  /**\n   * Encode the event as JSON.\n   *\n   * @returns JSON representation.\n   */\n  toJson(): BackpackOpenEventJson {\n    const json = super.toJson() as BackpackOpenEventJson;\n    json['isOpen'] = this.isOpen;\n    return json;\n  }\n\n  /**\n   * Decode the JSON event.\n   *\n   * @param json JSON representation.\n   * @param workspace A workspace to create the event on.\n   * @param event an instance of BackpackOpen to deserialize into.\n   * @returns A newly deserialized BackpackOpen event.\n   */\n  static fromJson(\n    json: BackpackOpenEventJson,\n    workspace: Blockly.Workspace,\n    event: unknown,\n  ): BackpackOpen {\n    const newEvent = super.fromJson(json, workspace, event) as BackpackOpen;\n    newEvent.isOpen = json['isOpen'];\n    return newEvent;\n  }\n}\n\nexport interface BackpackOpenEventJson\n  extends Blockly.Events.AbstractEventJson {\n  isOpen?: boolean;\n}\n\nBlockly.registry.register(\n  Blockly.registry.Type.EVENT,\n  backpackOpen,\n  BackpackOpen,\n);\n\n/**\n * Name of event that records a backpack change.\n */\nexport const backpackChange = 'backpack_change';\n\n/**\n * A UI event representing a change in a backpack's contents.\n */\nexport class BackpackChange extends Blockly.Events.UiBase {\n  /**\n   * Type of this event.\n   */\n  type = backpackChange;\n}\n\nBlockly.registry.register(\n  Blockly.registry.Type.EVENT,\n  backpackChange,\n  BackpackChange,\n);\n", "/**\n * @license\n * Copyright 2024 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport * as Blockly from 'blockly/core';\n\n/** Defines if an object can be added to the backpack. */\nexport interface Backpackable {\n  /**\n   * @return A representation of this object as a FlyoutItemInfo array, so that\n   * it can be displayed in the backpack.\n   *\n   * This method should remove any unique or useless state data (e.g. IDs or\n   * coordinates).\n   */\n  toFlyoutInfo(): Blockly.utils.toolbox.FlyoutItemInfo[];\n}\n\n/**\n * @param obj The object we want to check is a Backpackable or not.\n * @return Whether the given object conforms to the Backpackable interface.\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function isBackpackable(obj: any): obj is Backpackable {\n  return obj.toFlyoutInfo !== undefined;\n}\n", "/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview A backpack that lives on top of the workspace.\n * @author kozbial@google.com (Monica Kozbial)\n */\n\n/* eslint-disable @typescript-eslint/naming-convention */\n\nimport * as Blockly from 'blockly/core';\n\nimport {registerContextMenus} from './backpack_helpers';\nimport {BackpackOptions, parseOptions} from './options';\nimport {BackpackChange, BackpackOpen} from './ui_events';\nimport {Backpackable, isBackpackable} from './backpackable';\n\n/**\n * Class for backpack that can be used save blocks from the workspace for\n * future use.\n */\nexport class Backpack\n  extends Blockly.DragTarget\n  implements Blockly.IAutoHideable, Blockly.IPositionable\n{\n  /** The unique id for this component. */\n  id = 'backpack';\n\n  /**\n   * The backpack options, such as which context menus to show, whether to\n   * allow opening the backpack when empty and whether to use a different\n   * image when the backpack contains blocks.\n   */\n  private options: BackpackOptions;\n\n  /** The backpack flyout. Initialized during init. */\n  protected flyout_: Blockly.IFlyout | null = null;\n\n  /** A list of JSON (stored as strings) representing blocks in the backpack. */\n  protected contents_: string[] = [];\n\n  /** Array holding info needed to unbind events. Used for disposing. */\n  private boundEvents: Blockly.browserEvents.Data[] = [];\n\n  /** Left coordinate of the backpack in pixels. */\n  protected left_ = 0;\n\n  /** Top coordinate of the backpack in pixels. */\n  protected top_ = 0;\n\n  /** Width of the backpack in pixels. Used for clip path. */\n  protected readonly WIDTH_ = 40;\n\n  /** Height of the backpack in pixels. Used for clip path. */\n  protected readonly HEIGHT_ = 60;\n\n  /** Distance between backpack and bottom/top edge of workspace in pixels. */\n  protected readonly MARGIN_VERTICAL_ = 20;\n\n  /** Distance between backpack and right/left edge of workspace in pixels. */\n  protected readonly MARGIN_HORIZONTAL_ = 20;\n\n  /** Extent of hotspot on all sides beyond the size of the image in pixels. */\n  protected readonly HOTSPOT_MARGIN_ = 10;\n\n  /** The SVG group containing the backpack. */\n  protected svgGroup_: SVGElement | null = null;\n\n  /** The SVG image of the backpack. */\n  protected svgImg_: SVGImageElement | null = null;\n\n  /** Top offset for backpack svg in pixels. */\n  private spriteTop = 10;\n\n  /** Left offset for backpack svg in pixels. */\n  private spriteLeft = 20;\n\n  /** Width/Height of svg in pixels. */\n  private readonly spriteSize = 80;\n\n  /** Whether or not the plugin has been initialized. */\n  protected initialized_ = false;\n\n  /**\n   * Constructor for a backpack.\n   *\n   * @param workspace_ The target workspace that\n   *     the backpack will be added to.\n   * @param backpackOptions The backpack options to use.\n   */\n  constructor(\n    protected workspace_: Blockly.WorkspaceSvg,\n    backpackOptions?: BackpackOptions,\n  ) {\n    super();\n    this.options = parseOptions(backpackOptions);\n    this.registerSerializer();\n  }\n\n  /**\n   * Registers serializer if options.skipSerializerRegistration is false\n   * and it hasn't been registered already.\n   */\n  private registerSerializer() {\n    if (this.options.skipSerializerRegistration) {\n      return;\n    }\n\n    if (\n      Blockly.registry.hasItem(Blockly.registry.Type.SERIALIZER, 'backpack')\n    ) {\n      return;\n    }\n\n    Blockly.serialization.registry.register(\n      'backpack',\n      new BackpackSerializer(),\n    );\n  }\n\n  /**\n   * Initializes the backpack.\n   */\n  init() {\n    this.workspace_.getComponentManager().addComponent({\n      component: this,\n      weight: 2,\n      capabilities: [\n        Blockly.ComponentManager.Capability.AUTOHIDEABLE,\n        Blockly.ComponentManager.Capability.DRAG_TARGET,\n        Blockly.ComponentManager.Capability.POSITIONABLE,\n      ],\n    });\n    this.initFlyout();\n    this.createDom();\n    this.attachListeners();\n    if (this.options.contextMenu) {\n      registerContextMenus(this.options.contextMenu, this.workspace_);\n    }\n    this.initialized_ = true;\n    this.workspace_.resize();\n  }\n\n  /**\n   * Disposes of workspace search.\n   * Unlink from all DOM elements and remove all event listeners\n   * to prevent memory leaks.\n   */\n  dispose() {\n    if (this.svgGroup_) {\n      Blockly.utils.dom.removeNode(this.svgGroup_);\n    }\n    for (const event of this.boundEvents) {\n      Blockly.browserEvents.unbind(event);\n    }\n    this.boundEvents.length = 0;\n  }\n\n  /**\n   * Creates and initializes the flyout and inserts it into the dom.\n   */\n  protected initFlyout() {\n    // Create flyout options.\n    const flyoutWorkspaceOptions = new Blockly.Options({\n      scrollbars: true,\n      parentWorkspace: this.workspace_,\n      rtl: this.workspace_.RTL,\n      oneBasedIndex: this.workspace_.options.oneBasedIndex,\n      renderer: this.workspace_.options.renderer,\n      rendererOverrides: this.workspace_.options.rendererOverrides || undefined,\n      move: {\n        scrollbars: true,\n      },\n    });\n    // Create vertical or horizontal flyout.\n    if (this.workspace_.horizontalLayout) {\n      flyoutWorkspaceOptions.toolboxPosition =\n        this.workspace_.toolboxPosition === Blockly.utils.toolbox.Position.TOP\n          ? Blockly.utils.toolbox.Position.BOTTOM\n          : Blockly.utils.toolbox.Position.TOP;\n      const HorizontalFlyout = Blockly.registry.getClassFromOptions(\n        Blockly.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX,\n        this.workspace_.options,\n        true,\n      );\n      if (HorizontalFlyout) {\n        this.flyout_ = new HorizontalFlyout(flyoutWorkspaceOptions);\n      } else {\n        throw new Error('HorizontalFlyout does not exist');\n      }\n    } else {\n      flyoutWorkspaceOptions.toolboxPosition =\n        this.workspace_.toolboxPosition === Blockly.utils.toolbox.Position.RIGHT\n          ? Blockly.utils.toolbox.Position.LEFT\n          : Blockly.utils.toolbox.Position.RIGHT;\n      const VerticalFlyout = Blockly.registry.getClassFromOptions(\n        Blockly.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,\n        this.workspace_.options,\n        true,\n      );\n      if (VerticalFlyout) {\n        this.flyout_ = new VerticalFlyout(flyoutWorkspaceOptions);\n      } else {\n        throw new Error('VerticalFlyout does not exist');\n      }\n    }\n    // Add flyout to DOM.\n    const parentNode = this.workspace_.getParentSvg().parentNode;\n    parentNode?.appendChild(this.flyout_?.createDom(Blockly.utils.Svg.SVG));\n    this.flyout_.init(this.workspace_);\n  }\n\n  /**\n   * Creates DOM for UI element.\n   */\n  protected createDom() {\n    this.svgGroup_ = Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.G,\n      {},\n      null,\n    );\n    const rnd = Blockly.utils.idGenerator.genUid();\n    const clip = Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.CLIPPATH,\n      {id: 'blocklyBackpackClipPath' + rnd},\n      this.svgGroup_,\n    );\n    Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.RECT,\n      {\n        width: this.WIDTH_,\n        height: this.HEIGHT_,\n      },\n      clip,\n    );\n    this.svgImg_ = Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.IMAGE,\n      {\n        'class': 'blocklyBackpack',\n        'clip-path': 'url(#blocklyBackpackClipPath' + rnd + ')',\n        'width': this.spriteSize + 'px',\n        'x': -this.spriteLeft,\n        'height': this.spriteSize + 'px',\n        'y': -this.spriteTop,\n      },\n      this.svgGroup_,\n    );\n    this.svgImg_.setAttributeNS(\n      Blockly.utils.dom.XLINK_NS,\n      'xlink:href',\n      backpackSvgDataUri,\n    );\n\n    Blockly.utils.dom.insertAfter(\n      this.svgGroup_,\n      this.workspace_.getBubbleCanvas(),\n    );\n  }\n\n  /**\n   * Attaches event listeners.\n   */\n  protected attachListeners() {\n    if (!this.svgGroup_) return;\n    this.addEvent(\n      this.svgGroup_,\n      'mousedown',\n      this,\n      this.blockMouseDownWhenOpenable,\n    );\n    this.addEvent(this.svgGroup_, 'mouseup', this, this.onClick);\n    this.addEvent(this.svgGroup_, 'mouseover', this, this.onMouseOver);\n    this.addEvent(this.svgGroup_, 'mouseout', this, this.onMouseOut);\n  }\n\n  /**\n   * Helper method for adding an event.\n   *\n   * @param node Node upon which to listen.\n   * @param name Event name to listen to (e.g. 'mousedown').\n   * @param thisObject The value of 'this' in the function.\n   * @param func Function to call when event is triggered.\n   */\n  private addEvent(\n    node: Element,\n    name: string,\n    thisObject: object,\n    func: (event: Event) => void,\n  ) {\n    const event = Blockly.browserEvents.bind(node, name, thisObject, func);\n    this.boundEvents.push(event);\n  }\n\n  /**\n   * Returns the backpack flyout.\n   *\n   * @returns The backpack flyout.\n   */\n  getFlyout(): Blockly.IFlyout | null {\n    return this.flyout_;\n  }\n\n  /**\n   * Returns the bounding rectangle of the drag target area in pixel units\n   * relative to viewport.\n   *\n   * @returns The component's bounding box. Null if drag\n   *   target area should be ignored.\n   */\n  getClientRect(): Blockly.utils.Rect | null {\n    if (!this.svgGroup_) {\n      return null;\n    }\n\n    const clientRect = this.svgGroup_.getBoundingClientRect();\n    const top = clientRect.top + this.spriteTop - this.HOTSPOT_MARGIN_;\n    const bottom = top + this.HEIGHT_ + 2 * this.HOTSPOT_MARGIN_;\n    const left = clientRect.left + this.spriteLeft - this.HOTSPOT_MARGIN_;\n    const right = left + this.WIDTH_ + 2 * this.HOTSPOT_MARGIN_;\n    return new Blockly.utils.Rect(top, bottom, left, right);\n  }\n\n  /**\n   * Returns the bounding rectangle of the UI element in pixel units relative to\n   * the Blockly injection div.\n   *\n   * @returns The componentâ€™s bounding box.\n   */\n  getBoundingRectangle(): Blockly.utils.Rect {\n    return new Blockly.utils.Rect(\n      this.top_,\n      this.top_ + this.HEIGHT_,\n      this.left_,\n      this.left_ + this.WIDTH_,\n    );\n  }\n\n  /**\n   * Positions the backpack.\n   * It is positioned in the opposite corner to the corner the\n   * categories/toolbox starts at.\n   *\n   * @param metrics The workspace metrics.\n   * @param savedPositions List of rectangles that\n   *     are already on the workspace.\n   */\n  position(\n    metrics: Blockly.MetricsManager.UiMetrics,\n    savedPositions: Blockly.utils.Rect[],\n  ) {\n    if (!this.initialized_) {\n      return;\n    }\n\n    const scrollbars = this.workspace_.scrollbar;\n    const hasVerticalScrollbars =\n      scrollbars && scrollbars.isVisible() && scrollbars.canScrollVertically();\n    const hasHorizontalScrollbars =\n      scrollbars &&\n      scrollbars.isVisible() &&\n      scrollbars.canScrollHorizontally();\n\n    if (\n      metrics.toolboxMetrics.position === Blockly.TOOLBOX_AT_LEFT ||\n      (this.workspace_.horizontalLayout && !this.workspace_.RTL)\n    ) {\n      // Right corner placement.\n      this.left_ =\n        metrics.absoluteMetrics.left +\n        metrics.viewMetrics.width -\n        this.WIDTH_ -\n        this.MARGIN_HORIZONTAL_;\n      if (hasVerticalScrollbars && !this.workspace_.RTL) {\n        this.left_ -= Blockly.Scrollbar.scrollbarThickness;\n      }\n    } else {\n      // Left corner placement.\n      this.left_ = this.MARGIN_HORIZONTAL_;\n      if (hasVerticalScrollbars && this.workspace_.RTL) {\n        this.left_ += Blockly.Scrollbar.scrollbarThickness;\n      }\n    }\n\n    const startAtBottom =\n      metrics.toolboxMetrics.position === Blockly.TOOLBOX_AT_BOTTOM;\n    if (startAtBottom) {\n      // Bottom corner placement\n      this.top_ =\n        metrics.absoluteMetrics.top +\n        metrics.viewMetrics.height -\n        this.HEIGHT_ -\n        this.MARGIN_VERTICAL_;\n      if (hasHorizontalScrollbars) {\n        // The horizontal scrollbars are always positioned on the bottom.\n        this.top_ -= Blockly.Scrollbar.scrollbarThickness;\n      }\n    } else {\n      // Upper corner placement\n      this.top_ = metrics.absoluteMetrics.top + this.MARGIN_VERTICAL_;\n    }\n\n    // Check for collision and bump if needed.\n    let boundingRect = this.getBoundingRectangle();\n    for (let i = 0, otherEl; (otherEl = savedPositions[i]); i++) {\n      if (boundingRect.intersects(otherEl)) {\n        if (startAtBottom) {\n          // Bump up.\n          this.top_ = otherEl.top - this.HEIGHT_ - this.MARGIN_VERTICAL_;\n        } else {\n          // Bump down.\n          this.top_ = otherEl.bottom + this.MARGIN_VERTICAL_;\n        }\n        // Recheck other savedPositions\n        boundingRect = this.getBoundingRectangle();\n        i = -1;\n      }\n    }\n\n    if (this.svgGroup_) {\n      this.svgGroup_.setAttribute(\n        'transform',\n        `translate(${this.left_},${this.top_})`,\n      );\n    }\n  }\n\n  /**\n   * Returns the count of items in the backpack.\n   *\n   * @returns The count of items.\n   */\n  getCount(): number {\n    return this.contents_.length;\n  }\n\n  /**\n   * Returns backpack contents.\n   *\n   * @returns The backpack contents.\n   */\n  getContents(): string[] {\n    // Return a shallow copy of the contents array.\n    return [...this.contents_];\n  }\n\n  /**\n   * Handles when a block or bubble is dropped on this component.\n   * Should not handle delete here.\n   *\n   * @param dragElement The block or bubble currently\n   *   being dragged.\n   */\n  onDrop(dragElement: Blockly.IDraggable) {\n    if (isBackpackable(dragElement)) {\n      this.addBackpackable(dragElement);\n    }\n  }\n\n  /**\n   * Converts the provided block into a JSON string and\n   * cleans the JSON of any unnecessary attributes\n   *\n   * @param block The block to convert.\n   * @returns The JSON object as a string.\n   */\n  private blockToJsonString(block: Blockly.Block): string {\n    const json = Blockly.serialization.blocks.save(block);\n\n    // Add a 'kind' key so the flyout can recognize it as a block.\n    (json as Blockly.utils.toolbox.FlyoutItemInfo).kind = 'BLOCK';\n\n    // The keys to remove.\n    const keys = ['id', 'height', 'width', 'pinned', 'enabled'];\n\n    // Traverse the JSON recursively.\n    const traverseJson = function (json: StateWithIndex, keys: string[]) {\n      for (const key in json) {\n        if (key) {\n          if (keys.indexOf(key) !== -1) {\n            delete json[key];\n          }\n          if (json[key] && typeof json[key] === 'object') {\n            traverseJson(json[key] as StateWithIndex, keys);\n          }\n        }\n      }\n    };\n\n    if (json) {\n      traverseJson(json as StateWithIndex, keys);\n    }\n    return JSON.stringify(json);\n  }\n\n  /**\n   * Converts serialized XML to its equivalent serialized JSON string\n   *\n   * @param blockXml The XML serialized block.\n   * @returns The JSON object as a string.\n   */\n  private blockXmlToJsonString(blockXml: string): string {\n    if (!blockXml.startsWith('<block')) {\n      throw new Error('Unrecognized XML format');\n    }\n\n    const workspace = new Blockly.Workspace();\n    try {\n      const block = Blockly.Xml.domToBlock(\n        Blockly.utils.xml.textToDom(blockXml),\n        workspace,\n      );\n      return this.blockToJsonString(block);\n    } finally {\n      workspace.dispose();\n    }\n  }\n\n  /**\n   * Returns whether the backpack contains a duplicate of the provided Block.\n   *\n   * @param block The block to check.\n   * @returns Whether the backpack contains a duplicate of the\n   *     provided block.\n   */\n  containsBlock(block: Blockly.Block): boolean {\n    if (isBackpackable(block)) {\n      return this.containsBackpackable(block);\n    } else {\n      return this.contents_.indexOf(this.blockToJsonString(block)) !== -1;\n    }\n  }\n\n  /**\n   * Adds the specified block to backpack.\n   *\n   * @param block The block to be added to the backpack.\n   */\n  addBlock(block: Blockly.Block) {\n    if (isBackpackable(block)) {\n      this.addBackpackable(block);\n    } else {\n      this.addItem(this.blockToJsonString(block));\n    }\n  }\n\n  /**\n   * Adds the provided blocks to backpack.\n   *\n   * @param blocks The blocks to be added to the\n   *     backpack.\n   */\n  addBlocks(blocks: Blockly.Block[]) {\n    for (const block of blocks) {\n      if (isBackpackable(block)) {\n        this.addBackpackable(block);\n      } else {\n        this.addItem(this.blockToJsonString(block));\n      }\n    }\n  }\n\n  /**\n   * Removes the specified block from the backpack.\n   *\n   * @param block The block to be removed from the backpack.\n   */\n  removeBlock(block: Blockly.Block) {\n    if (isBackpackable(block)) {\n      this.removeBackpackable(block);\n    } else {\n      this.removeItem(this.blockToJsonString(block));\n    }\n  }\n\n  /**\n   * @param backpackable The backpackable we want to check for existence within\n   *     the backpack.\n   * @return whether the backpack contains a duplicate of the provided\n   *     backpackable.\n   */\n  containsBackpackable(backpackable: Backpackable): boolean {\n    return backpackable\n      .toFlyoutInfo()\n      .every((info) => this.contents_.indexOf(JSON.stringify(info)) !== -1);\n  }\n\n  /**\n   * @param backpackable The backpackable to add to the backpack.\n   */\n  addBackpackable(backpackable: Backpackable) {\n    this.addBackpackables([backpackable]);\n  }\n\n  /** @param backpackables The backpackables to add to the backpack. */\n  addBackpackables(backpackables: Backpackable[]) {\n    this.addItems(\n      backpackables\n        .map((b) => b.toFlyoutInfo())\n        .reduce((acc, curr) => [...acc, ...curr])\n        .map((info) => JSON.stringify(info)),\n    );\n  }\n\n  /** @param backpackable The backpackable to remove from the backpack. */\n  removeBackpackable(backpackable: Backpackable) {\n    for (const info of backpackable.toFlyoutInfo()) {\n      this.removeItem(JSON.stringify(info));\n    }\n  }\n\n  /**\n   * Adds item to backpack.\n   *\n   * @param item Text representing the JSON of a block to add,\n   *     cleaned of all unnecessary attributes.\n   */\n  addItem(item: string) {\n    this.addItems([item]);\n  }\n\n  /**\n   * Adds multiple items to the backpack.\n   *\n   * @param items The backpack contents to add.\n   */\n  addItems(items: string[]) {\n    const addedItems = this.filterDuplicates(items);\n    if (addedItems.length) {\n      this.contents_.unshift(...addedItems);\n      this.onContentChange();\n    }\n  }\n\n  /**\n   * Removes item from the backpack.\n   *\n   * @param item Text representing the JSON of a block to remove,\n   * cleaned of all unnecessary attributes.\n   */\n  removeItem(item: string) {\n    const itemIndex = this.contents_.indexOf(item);\n    if (itemIndex !== -1) {\n      this.contents_.splice(itemIndex, 1);\n      this.onContentChange();\n    }\n  }\n\n  /**\n   * Sets backpack contents.\n   *\n   * @param contents The new backpack contents.\n   */\n  setContents(contents: string[]) {\n    this.contents_ = [];\n    this.contents_ = this.filterDuplicates(\n      // Support XML serialized content for backwards compatiblity:\n      // https://github.com/google/blockly-samples/issues/1827\n      contents.map((content) =>\n        content.startsWith('<block')\n          ? this.blockXmlToJsonString(content)\n          : content,\n      ),\n    );\n    this.onContentChange();\n  }\n\n  /**\n   * Empties the backpack's contents. If the contents-flyout is currently open\n   * it will be closed.\n   */\n  empty() {\n    if (!this.getCount()) {\n      return;\n    }\n    if (this.contents_.length) {\n      this.contents_ = [];\n      this.onContentChange();\n    }\n    this.close();\n  }\n\n  /**\n   * Handles content change.\n   */\n  protected onContentChange() {\n    this.maybeRefreshFlyoutContents();\n    Blockly.Events.fire(new BackpackChange(this.workspace_.id));\n\n    if (!this.options.useFilledBackpackImage || !this.svgImg_) return;\n    if (this.contents_.length > 0) {\n      this.svgImg_.setAttributeNS(\n        Blockly.utils.dom.XLINK_NS,\n        'xlink:href',\n        backpackFilledSvgDataUri,\n      );\n    } else {\n      this.svgImg_.setAttributeNS(\n        Blockly.utils.dom.XLINK_NS,\n        'xlink:href',\n        backpackSvgDataUri,\n      );\n    }\n  }\n\n  /**\n   * Returns a filtered list without duplicates within itself and without any\n   * shared elements with this.contents_.\n   *\n   * @param array The array of items to filter.\n   * @returns The filtered list.\n   */\n  private filterDuplicates(array: string[]): string[] {\n    return array.filter((item, idx) => {\n      return array.indexOf(item) === idx && this.contents_.indexOf(item) === -1;\n    });\n  }\n\n  /**\n   * Returns whether the backpack is open-able.\n   *\n   * @returns Whether the backpack is open-able.\n   */\n  protected isOpenable(): boolean {\n    return !this.isOpen() && this.options.allowEmptyBackpackOpen\n      ? true\n      : this.getCount() > 0;\n  }\n\n  /**\n   * Returns whether the backpack is open.\n   *\n   * @returns Whether the backpack is open.\n   */\n  isOpen(): boolean {\n    return this.flyout_ ? this.flyout_.isVisible() : false;\n  }\n\n  /**\n   * Opens the backpack flyout.\n   */\n  open() {\n    if (!this.isOpenable()) {\n      return;\n    }\n    const jsons = this.contents_.map((text) => JSON.parse(text));\n    this.flyout_?.show(jsons);\n    // TODO: We can remove the setVisible check when updating from ^10.0.0 to\n    //    ^11.\n    /* eslint-disable @typescript-eslint/no-explicit-any */\n    if (\n      this.workspace_.scrollbar &&\n      (this.workspace_.scrollbar as any).setVisible\n    ) {\n      (this.workspace_.scrollbar as any).setVisible(false);\n    }\n    /* eslint-enable @typescript-eslint/no-explicit-any */\n    Blockly.Events.fire(new BackpackOpen(true, this.workspace_.id));\n  }\n\n  /**\n   * Refreshes backpack flyout contents if the flyout is open.\n   */\n  protected maybeRefreshFlyoutContents() {\n    if (!this.isOpen()) {\n      return;\n    }\n    const json = this.contents_.map((text) => JSON.parse(text));\n    this.flyout_?.show(json);\n  }\n\n  /**\n   * Closes the backpack flyout.\n   */\n  close() {\n    if (!this.isOpen()) {\n      return;\n    }\n    this.flyout_?.hide();\n    // TODO: We can remove the setVisible check when updating from ^10.0.0 to\n    //    ^11.\n    /* eslint-disable @typescript-eslint/no-explicit-any */\n    if (\n      this.workspace_.scrollbar &&\n      (this.workspace_.scrollbar as any).setVisible\n    ) {\n      (this.workspace_.scrollbar as any).setVisible(true);\n    }\n    /* eslint-enable @typescript-eslint/no-explicit-any */\n    Blockly.Events.fire(new BackpackOpen(false, this.workspace_.id));\n  }\n\n  /**\n   * Hides the component. Called in Blockly.hideChaff.\n   *\n   * @param onlyClosePopups Whether only popups should be closed.\n   *     Flyouts should not be closed if this is true.\n   */\n  autoHide(onlyClosePopups: boolean) {\n    // The backpack flyout always autocloses because it overlays the backpack UI\n    // (no backpack to click to close it).\n    if (!onlyClosePopups) {\n      this.close();\n    }\n  }\n\n  /**\n   * Handle click event.\n   *\n   * @param e Mouse event.\n   */\n  protected onClick(e: Event) {\n    if (e instanceof MouseEvent && Blockly.browserEvents.isRightButton(e)) {\n      return;\n    }\n    this.open();\n    const uiEvent = new (Blockly.Events.get(Blockly.Events.CLICK))(\n      null,\n      this.workspace_.id,\n      'backpack',\n    );\n    Blockly.Events.fire(uiEvent);\n  }\n\n  /**\n   * Handles when a cursor with a block or bubble enters this drag target.\n   *\n   * @param dragElement The block or bubble currently\n   *   being dragged.\n   */\n  onDragEnter(dragElement: Blockly.IDraggable) {\n    if (isBackpackable(dragElement)) {\n      this.updateHoverStying(true);\n    }\n  }\n\n  /**\n   * Handles when a cursor with a block or bubble exits this drag target.\n   *\n   * @param dragElement The block or bubble currently\n   *   being dragged.\n   */\n  onDragExit(dragElement: Blockly.IDraggable) {\n    this.updateHoverStying(false);\n  }\n\n  /**\n   * Handles a mouseover event.\n   */\n  private onMouseOver() {\n    if (this.isOpenable()) {\n      this.updateHoverStying(true);\n    }\n  }\n\n  /**\n   * Handles a mouseout event.\n   */\n  private onMouseOut() {\n    this.updateHoverStying(false);\n  }\n\n  /**\n   * Adds or removes styling to darken the backpack to show it is interactable.\n   *\n   * @param addClass True to add styling, false to remove.\n   */\n  protected updateHoverStying(addClass: boolean) {\n    const backpackDarken = 'blocklyBackpackDarken';\n    if (this.svgImg_) {\n      if (addClass) {\n        Blockly.utils.dom.addClass(this.svgImg_, backpackDarken);\n      } else {\n        Blockly.utils.dom.removeClass(this.svgImg_, backpackDarken);\n      }\n    }\n  }\n\n  /**\n   * Returns whether the provided block or bubble should not be moved after\n   * being dropped on this component. If true, the element will return to where\n   * it was when the drag started.\n   *\n   * @param dragElement The block or bubble currently\n   *   being dragged.\n   * @returns Whether the block or bubble provided should be returned\n   *   to drag start.\n   */\n  shouldPreventMove(dragElement: Blockly.IDraggable): boolean {\n    return dragElement instanceof Blockly.BlockSvg;\n  }\n\n  /**\n   * Prevents a workspace scroll and click event if the backpack is openable.\n   *\n   * @param e A mouse down event.\n   */\n  protected blockMouseDownWhenOpenable(e: Event) {\n    if (\n      e instanceof MouseEvent &&\n      !Blockly.browserEvents.isRightButton(e) &&\n      this.isOpenable()\n    ) {\n      e.stopPropagation(); // Don't start a workspace scroll.\n    }\n  }\n}\n\n/**\n * Base64 encoded data uri for backpack  icon.\n */\nconst backpackSvgDataUri =\n  'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC' +\n  '9zdmciIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDI0IDI0IiBoZWlnaHQ9IjI0cHgiIH' +\n  'ZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjI0cHgiIGZpbGw9IiM0NTVBNjQiPjxnPjxyZW' +\n  'N0IGZpbGw9Im5vbmUiIGhlaWdodD0iMjQiIHdpZHRoPSIyNCIvPjwvZz48Zz48Zy8+PGc+PH' +\n  'BhdGggZD0iTTEzLjk3LDUuMzRDMTMuOTgsNS4yMywxNCw1LjEyLDE0LDVjMC0xLjEtMC45LT' +\n  'ItMi0ycy0yLDAuOS0yLDJjMCwwLjEyLDAuMDIsMC4yMywwLjAzLDAuMzRDNy42OSw2LjE1LD' +\n  'YsOC4zOCw2LDExdjggYzAsMS4xLDAuOSwyLDIsMmg4YzEuMSwwLDItMC45LDItMnYtOEMxOC' +\n  'w4LjM4LDE2LjMxLDYuMTUsMTMuOTcsNS4zNHogTTExLDVjMC0wLjU1LDAuNDUtMSwxLTFzMS' +\n  'wwLjQ1LDEsMSBjMCwwLjAzLTAuMDEsMC4wNi0wLjAyLDAuMDlDMTIuNjYsNS4wMywxMi4zNC' +\n  'w1LDEyLDVzLTAuNjYsMC4wMy0wLjk4LDAuMDlDMTEuMDEsNS4wNiwxMSw1LjAzLDExLDV6IE' +\n  '0xNiwxM3YxdjAuNSBjMCwwLjI4LTAuMjIsMC41LTAuNSwwLjVTMTUsMTQuNzgsMTUsMTQuNV' +\n  'YxNHYtMUg4di0xaDdoMVYxM3oiLz48L2c+PC9nPjwvc3ZnPg==';\n\n/**\n * Base64 encoded data uri for backpack  icon when filled.\n */\nconst backpackFilledSvgDataUri =\n  'data:image/svg+xml;base64,PD94bWwgdmVyc2' +\n  'lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYX' +\n  'RlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgoKPHN2Zw' +\n  'ogICB3aWR0aD0iMjQiCiAgIGhlaWdodD0iMjQiCiAgIHZpZXdCb3g9IjAgMCAyNCAyNCIKIC' +\n  'AgdmVyc2lvbj0iMS4xIgogICBpZD0ic3ZnNSIKICAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3' +\n  'JnLzIwMDAvc3ZnIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj' +\n  '4KICA8ZGVmcwogICAgIGlkPSJkZWZzMiIgLz4KICA8ZwogICAgIGlkPSJsYXllcjEiPgogIC' +\n  'AgPGcKICAgICAgIHN0eWxlPSJmaWxsOiM0NTVhNjQiCiAgICAgICBpZD0iZzg0OCIKICAgIC' +\n  'AgIHRyYW5zZm9ybT0ibWF0cml4KDAuMjY0NTgzMzMsMCwwLDAuMjY0NTgzMzMsOC44MjQ5OT' +\n  'k3LDguODI0OTk5NykiPgogICAgICA8ZwogICAgICAgICBpZD0iZzgyNiI+CiAgICAgICAgPH' +\n  'JlY3QKICAgICAgICAgICBmaWxsPSJub25lIgogICAgICAgICAgIGhlaWdodD0iMjQiCiAgIC' +\n  'AgICAgICAgd2lkdGg9IjI0IgogICAgICAgICAgIGlkPSJyZWN0ODI0IgogICAgICAgICAgIH' +\n  'g9IjAiCiAgICAgICAgICAgeT0iMCIgLz4KICAgICAgPC9nPgogICAgICA8ZwogICAgICAgIC' +\n  'BpZD0iZzgzNCI+CiAgICAgICAgPGcKICAgICAgICAgICBpZD0iZzgyOCIgLz4KICAgICAgIC' +\n  'A8ZwogICAgICAgICAgIGlkPSJnMjIyMyI+CiAgICAgICAgICA8ZwogICAgICAgICAgICAgaW' +\n  'Q9ImcyMTAxNiI+CiAgICAgICAgICAgIDxnCiAgICAgICAgICAgICAgIHN0eWxlPSJmaWxsOi' +\n  'M0NTVhNjQiCiAgICAgICAgICAgICAgIGlkPSJnMTQ5MyIKICAgICAgICAgICAgICAgdHJhbn' +\n  'Nmb3JtPSJtYXRyaXgoMy43Nzk1Mjc2LDAsMCwzLjc3OTUyNzYsLTMzLjM1NDMzLC0zMy4zNT' +\n  'QzMykiPgogICAgICAgICAgICAgIDxnCiAgICAgICAgICAgICAgICAgaWQ9ImcxNDcxIj4KIC' +\n  'AgICAgICAgICAgICAgIDxwYXRoCiAgICAgICAgICAgICAgICAgICBpZD0icmVjdDE0NjkiCi' +\n  'AgICAgICAgICAgICAgICAgICBzdHlsZT0iZmlsbDpub25lIgogICAgICAgICAgICAgICAgIC' +\n  'AgZD0iTSAwLDAgSCAyNCBWIDI0IEggMCBaIiAvPgogICAgICAgICAgICAgIDwvZz4KICAgIC' +\n  'AgICAgICAgICA8ZwogICAgICAgICAgICAgICAgIGlkPSJnMTQ3OSI+CiAgICAgICAgICAgIC' +\n  'AgICA8ZwogICAgICAgICAgICAgICAgICAgaWQ9ImcxNDczIiAvPgogICAgICAgICAgICAgIC' +\n  'AgPGcKICAgICAgICAgICAgICAgICAgIGlkPSJnMTQ3NyI+CiAgICAgICAgICAgICAgICAgID' +\n  'xwYXRoCiAgICAgICAgICAgICAgICAgICAgIGlkPSJwYXRoMTQ3NSIKICAgICAgICAgICAgIC' +\n  'AgICAgICAgZD0ibSAxMiwzIGMgLTEuMSwwIC0yLDAuOSAtMiwyIDAsMC4xMiAwLjAxOTMsMC' +\n  '4yMjk4NDM4IDAuMDI5MywwLjMzOTg0MzggQyA3LjY4OTI5NjUsNi4xNDk4NDMzIDYsOC4zOC' +\n  'A2LDExIHYgOCBjIDAsMS4xIDAuOSwyIDIsMiBoIDggYyAxLjEsMCAyLC0wLjkgMiwtMiBWID' +\n  'ExIEMgMTgsOC4zOCAxNi4zMTA3MDMsNi4xNDk4NDMzIDEzLjk3MDcwMyw1LjMzOTg0MzggMT' +\n  'MuOTgwNzAzLDUuMjI5ODQzOCAxNCw1LjEyIDE0LDUgMTQsMy45IDEzLjEsMyAxMiwzIFogbS' +\n  'AwLDEgYyAwLjU1LDAgMSwwLjQ1IDEsMSAwLDAuMDMgLTAuMDA5NSwwLjA1OTg0NCAtMC4wMT' +\n  'k1MywwLjA4OTg0NCBDIDEyLjY2MDQ2OSw1LjAyOTg0MzggMTIuMzQsNSAxMiw1IDExLjY2LD' +\n  'UgMTEuMzM5NTMxLDUuMDI5ODQzOCAxMS4wMTk1MzEsNS4wODk4NDM4IDExLjAwOTUzMSw1Lj' +\n  'A1OTg0MzggMTEsNS4wMyAxMSw1IDExLDQuNDUgMTEuNDUsNCAxMiw0IFogbSAtMy40NzI2NT' +\n  'YyLDYuMzk4NDM4IGggMS4xNTYyNSB2IDIuNjQwNjI0IGggMC4zMDkzMzU0IGwgLTIuMzdlLT' +\n  'UsLTEuMTcxMTQ2IDEuMDgyNzEwNSwtMTBlLTcgMC4wMTEsMS4xNzExNDYgaCAwLjMzMzMwNC' +\n  'BsIC0wLjAzNTA0LC0yLjU4NzMxNSBoIDAuNTc4MTI1IDAuNTc4MTI1IGwgMC4wMTEwNSwyLj' +\n  'U4NzMxNSBoIDAuMzU2MDI0IFYgMTIuMDYwNTQ3IEggMTQuMDYyNSB2IDAuOTc4NTE1IGggMC' +\n  '4zMzAwNzggdiAtMi41NTI3MzQgaCAxLjE1NjI1IHYgMi41NTI3MzQgaCAwLjk2Njc5NyB2ID' +\n  'AuMzU3NDIyIEggOS42ODM1OTM4IDguNTI3MzQzOCA3LjYwMzUxNTYgdiAtMC4zNTc0MjIgaC' +\n  'AwLjkyMzgyODIgeiIKICAgICAgICAgICAgICAgICAgICAgLz4KICAgICAgICAgICAgICAgID' +\n  'wvZz4KICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgIDwvZz4KICAgICAgICAgIDwvZz' +\n  '4KICAgICAgICA8L2c+CiAgICAgIDwvZz4KICAgIDwvZz4KICA8L2c+Cjwvc3ZnPgo=';\n\nBlockly.Css.register(`\n.blocklyBackpack {\n  opacity: 0.4;\n}\n.blocklyBackpackDarken {\n  opacity: 0.6;\n}\n.blocklyBackpack:active {\n  opacity: 0.8;\n}\n`);\n\n/**\n * Custom serializer so that the backpack can save and later recall which\n * blocks have been saved in a workspace.\n */\nclass BackpackSerializer {\n  /**\n   * The priority for deserializing block suggestion data.\n   * Should be after blocks, procedures, and variables.\n   */\n  priority = Blockly.serialization.priorities.BLOCKS - 10;\n\n  /**\n   * Saves a target workspace's state to serialized JSON.\n   *\n   * @param workspace the workspace to save\n   * @returns the serialized JSON if present\n   */\n  save(workspace: Blockly.WorkspaceSvg): object[] {\n    const componentManager = workspace.getComponentManager();\n    const backpack = componentManager.getComponent('backpack') as Backpack;\n    return backpack?.getContents().map((text) => JSON.parse(text));\n  }\n\n  /**\n   * Loads a serialized state into the target workspace.\n   *\n   * @param state the serialized state JSON\n   * @param workspace the workspace to load into\n   */\n  load(state: object[], workspace: Blockly.WorkspaceSvg) {\n    const jsonStrings = state.map((j) => JSON.stringify(j));\n    const componentManager = workspace.getComponentManager();\n    const backpack = componentManager.getComponent('backpack') as Backpack;\n    backpack?.setContents(jsonStrings);\n  }\n\n  /**\n   * Resets the state of a workspace.\n   *\n   * @param workspace the workspace to reset\n   */\n  clear(workspace: Blockly.WorkspaceSvg) {\n    const componentManager = workspace.getComponentManager();\n    const backpack = componentManager.getComponent('backpack') as Backpack;\n    backpack?.empty();\n  }\n}\n\ninterface StateWithIndex extends Blockly.serialization.blocks.State {\n  [key: string]: unknown;\n}\n", "/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Typedefs and utility methods for parsing options for the\n * backpack plugin.\n * @author kozbial@google.com (Monica Kozbial)\n */\n\nexport interface BackpackContextMenuOptions {\n  emptyBackpack?: boolean;\n  removeFromBackpack?: boolean;\n  copyToBackpack?: boolean;\n  copyAllToBackpack?: boolean;\n  pasteAllToBackpack?: boolean;\n  disablePreconditionChecks?: boolean;\n}\n\nexport interface BackpackOptions {\n  allowEmptyBackpackOpen?: boolean;\n  useFilledBackpackImage?: boolean;\n  skipSerializerRegistration?: boolean;\n  contextMenu?: BackpackContextMenuOptions;\n}\n\n/**\n * Returns a new options object with all properties set, using default values\n * if not specified in the optional options that were passed in.\n *\n * @param options The options to use.\n * @returns The created options object.\n */\nexport function parseOptions(options?: BackpackOptions): BackpackOptions {\n  const defaults = {\n    allowEmptyBackpackOpen: true,\n    useFilledBackpackImage: false,\n    skipSerializerRegistration: false,\n    contextMenu: {\n      emptyBackpack: true,\n      removeFromBackpack: true,\n      copyToBackpack: true,\n      copyAllToBackpack: false,\n      pasteAllToBackpack: false,\n      disablePreconditionChecks: false,\n    },\n  };\n\n  if (!options) {\n    return defaults;\n  }\n\n  return {\n    allowEmptyBackpackOpen:\n      options.allowEmptyBackpackOpen ?? defaults.allowEmptyBackpackOpen,\n    useFilledBackpackImage:\n      options.useFilledBackpackImage ?? defaults.useFilledBackpackImage,\n    skipSerializerRegistration:\n      options.skipSerializerRegistration ?? defaults.skipSerializerRegistration,\n    contextMenu: {\n      ...defaults.contextMenu,\n      ...options.contextMenu,\n    },\n  };\n}\n", "/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Helper and utility methods for the backpack plugin.\n * @author kozbial@google.com (Monica Kozbial)\n */\n\nimport './msg';\n\nimport * as Blockly from 'blockly/core';\n\nimport {Backpack} from './backpack';\nimport {BackpackContextMenuOptions} from './options';\n\n/**\n * Registers a context menu option to empty the backpack when right-clicked.\n *\n * @param workspace The workspace to register the context menu option on.\n */\nfunction registerEmptyBackpack(workspace: Blockly.WorkspaceSvg) {\n  const prevConfigureContextMenu = workspace.configureContextMenu;\n  workspace.configureContextMenu = (menuOptions, e: Event) => {\n    const backpack = workspace\n      .getComponentManager()\n      .getComponent('backpack') as Backpack;\n    const backpackClientRect = backpack && backpack.getClientRect();\n    if (e instanceof PointerEvent && backpackClientRect) {\n      if (!backpack || !backpackClientRect.contains(e.clientX, e.clientY)) {\n        prevConfigureContextMenu &&\n          prevConfigureContextMenu.call(null, menuOptions, e);\n        return;\n      }\n    }\n    menuOptions.length = 0;\n    const backpackOptions = {\n      text: Blockly.Msg['EMPTY_BACKPACK'],\n      enabled: !!backpack.getCount(),\n      callback: function () {\n        backpack.empty();\n      },\n      scope: {\n        workspace,\n      },\n      weight: 0,\n    };\n    menuOptions.push(backpackOptions);\n  };\n}\n\n/**\n * Registers a context menu option to remove a block from a backpack flyout.\n */\nfunction registerRemoveFromBackpack() {\n  if (Blockly.ContextMenuRegistry.registry.getItem('remove_from_backpack')) {\n    return;\n  }\n  const removeFromBackpack = {\n    displayText: Blockly.Msg['REMOVE_FROM_BACKPACK'],\n    preconditionFn: function (scope: Blockly.ContextMenuRegistry.Scope) {\n      if (!scope.block) return 'hidden';\n      const ws = scope.block.workspace;\n      if (ws.isFlyout && ws.targetWorkspace) {\n        const backpack = ws.targetWorkspace\n          .getComponentManager()\n          .getComponent('backpack') as Backpack;\n        const backpackFlyout = backpack && backpack.getFlyout();\n        if (\n          backpack &&\n          backpackFlyout &&\n          backpackFlyout.getWorkspace().id === ws.id\n        ) {\n          return 'enabled';\n        }\n      }\n      return 'hidden';\n    },\n    callback: function (scope: Blockly.ContextMenuRegistry.Scope) {\n      if (!scope.block || !scope.block.workspace.targetWorkspace) return;\n      const backpack = scope.block.workspace.targetWorkspace\n        .getComponentManager()\n        .getComponent('backpack') as Backpack;\n      backpack.removeBlock(scope.block);\n    },\n    scopeType: Blockly.ContextMenuRegistry.ScopeType.BLOCK,\n    id: 'remove_from_backpack',\n    // Use a larger weight to push the option lower on the context menu.\n    weight: 200,\n  };\n  Blockly.ContextMenuRegistry.registry.register(removeFromBackpack);\n}\n\n/**\n * Registers context menu options for adding a block to the backpack.\n *\n * @param disablePreconditionContainsCheck Whether to disable the\n *   precondition check for whether the backpack contains the block.\n */\nfunction registerCopyToBackpack(disablePreconditionContainsCheck: boolean) {\n  if (Blockly.ContextMenuRegistry.registry.getItem('copy_to_backpack')) {\n    return;\n  }\n  const copyToBackpack = {\n    displayText: function (scope: Blockly.ContextMenuRegistry.Scope) {\n      if (!scope.block) {\n        return '';\n      }\n      return Blockly.Msg['COPY_TO_BACKPACK'];\n    },\n    preconditionFn: function (scope: Blockly.ContextMenuRegistry.Scope) {\n      if (!scope.block) return 'hidden';\n      const ws = scope.block.workspace;\n      if (!ws.isFlyout) {\n        const backpack = ws\n          .getComponentManager()\n          .getComponent('backpack') as Backpack;\n        if (backpack) {\n          if (disablePreconditionContainsCheck) {\n            return 'enabled';\n          }\n          return backpack.containsBlock(scope.block) ? 'disabled' : 'enabled';\n        }\n      }\n      return 'hidden';\n    },\n    callback: function (scope: Blockly.ContextMenuRegistry.Scope) {\n      if (!scope.block) return;\n      const backpack = scope.block.workspace\n        .getComponentManager()\n        .getComponent('backpack') as Backpack;\n      backpack.addBlock(scope.block);\n    },\n    scopeType: Blockly.ContextMenuRegistry.ScopeType.BLOCK,\n    id: 'copy_to_backpack',\n    // Use a larger weight to push the option lower on the context menu.\n    weight: 200,\n  };\n  Blockly.ContextMenuRegistry.registry.register(copyToBackpack);\n}\n\n/**\n * Registers context menu options for copying all blocks from the workspace to\n * the backpack.\n */\nfunction registerCopyAllBackpack() {\n  if (Blockly.ContextMenuRegistry.registry.getItem('copy_all_to_backpack')) {\n    return;\n  }\n  const copyAllToBackpack = {\n    displayText: Blockly.Msg['COPY_ALL_TO_BACKPACK'],\n    preconditionFn: function (scope: Blockly.ContextMenuRegistry.Scope) {\n      const ws = scope.workspace;\n      if (ws && !ws.isFlyout) {\n        const backpack = ws.getComponentManager().getComponent('backpack');\n        if (backpack) {\n          return 'enabled';\n        }\n      }\n      return 'hidden';\n    },\n    callback: function (scope: Blockly.ContextMenuRegistry.Scope) {\n      const ws = scope.workspace;\n      if (!ws) return;\n      const backpack = ws\n        .getComponentManager()\n        .getComponent('backpack') as Backpack;\n      backpack.addBlocks(ws.getTopBlocks(true));\n    },\n    scopeType: Blockly.ContextMenuRegistry.ScopeType.WORKSPACE,\n    id: 'copy_all_to_backpack',\n    // Use a larger weight to push the option lower on the context menu.\n    weight: 200,\n  };\n  Blockly.ContextMenuRegistry.registry.register(copyAllToBackpack);\n}\n\n/**\n * Registers context menu options for pasting all blocks from the backpack to\n * the workspace.\n */\nfunction registerPasteAllBackpack() {\n  if (Blockly.ContextMenuRegistry.registry.getItem('paste_all_from_backpack')) {\n    return;\n  }\n  const pasteAllFromBackpack = {\n    displayText: function (scope: Blockly.ContextMenuRegistry.Scope) {\n      if (!scope.workspace) {\n        return '';\n      }\n      const backpack = scope.workspace\n        .getComponentManager()\n        .getComponent('backpack') as Backpack;\n      const backpackCount = backpack.getCount();\n      return `${Blockly.Msg['PASTE_ALL_FROM_BACKPACK']} (${backpackCount})`;\n    },\n    preconditionFn: function (scope: Blockly.ContextMenuRegistry.Scope) {\n      const ws = scope.workspace;\n      if (ws && !ws.isFlyout) {\n        const backpack = ws.getComponentManager().getComponent('backpack');\n        if (backpack) {\n          return 'enabled';\n        }\n      }\n      return 'hidden';\n    },\n    callback: function (scope: Blockly.ContextMenuRegistry.Scope) {\n      const ws = scope.workspace;\n      if (!ws) return;\n      const backpack = ws\n        .getComponentManager()\n        .getComponent('backpack') as Backpack;\n      const contents = backpack.getContents();\n      contents.forEach((blockText) => {\n        const block = Blockly.serialization.blocks.append(\n          JSON.parse(blockText),\n          ws,\n        ) as Blockly.BlockSvg;\n        block.scheduleSnapAndBump();\n      });\n    },\n    scopeType: Blockly.ContextMenuRegistry.ScopeType.WORKSPACE,\n    id: 'paste_all_from_backpack',\n    // Use a larger weight to push the option lower on the context menu.\n    weight: 200,\n  };\n  Blockly.ContextMenuRegistry.registry.register(pasteAllFromBackpack);\n}\n\n/**\n * Register all context menu options.\n *\n * @param contextMenuOptions The backpack context menu options.\n * @param workspace The workspace to register the context menu options.\n */\nexport function registerContextMenus(\n  contextMenuOptions: BackpackContextMenuOptions,\n  workspace: Blockly.WorkspaceSvg,\n) {\n  if (contextMenuOptions.emptyBackpack) {\n    registerEmptyBackpack(workspace);\n  }\n  if (contextMenuOptions.removeFromBackpack) {\n    registerRemoveFromBackpack();\n  }\n  if (contextMenuOptions.copyToBackpack) {\n    registerCopyToBackpack(\n      contextMenuOptions.disablePreconditionChecks ?? false,\n    );\n  }\n  if (contextMenuOptions.copyAllToBackpack) {\n    registerCopyAllBackpack();\n  }\n  if (contextMenuOptions.pasteAllToBackpack) {\n    registerPasteAllBackpack();\n  }\n}\n"],
  "mappings": "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",
  "names": ["root", "factory", "exports", "module", "require", "define", "amd", "a", "i", "this", "__WEBPACK_EXTERNAL_MODULE__370__", "__webpack_module_cache__", "__webpack_require__", "moduleId", "cachedModule", "__webpack_modules__", "d", "definition", "key", "o", "Object", "defineProperty", "enumerable", "get", "obj", "prop", "prototype", "hasOwnProperty", "call", "r", "Symbol", "toStringTag", "value", "backpackOpen", "BackpackOpen", "UiBase", "isOpen", "workspaceId", "super", "type", "toJson", "json", "workspace", "event", "newEvent", "fromJson", "register", "Type", "EVENT", "backpackChange", "BackpackChange", "isBackpackable", "toFlyoutInfo", "Backpack", "workspace_", "backpackOptions", "id", "flyout_", "contents_", "boundEvents", "left_", "top_", "WIDTH_", "HEIGHT_", "MARGIN_VERTICAL_", "MARGIN_HORIZONTAL_", "HOTSPOT_MARGIN_", "svgGroup_", "svgImg_", "spriteTop", "spriteLeft", "spriteSize", "initialized_", "options", "defaults", "allowEmptyBackpackOpen", "useFilledBackpackImage", "skipSerializerRegistration", "contextMenu", "emptyBackpack", "removeFromBackpack", "copyToBackpack", "copyAllToBackpack", "pasteAllToBackpack", "disablePreconditionChecks", "e", "s", "registerSerializer", "hasItem", "SERIALIZER", "registry", "BackpackSerializer", "init", "contextMenuOptions", "getComponentManager", "addComponent", "component", "weight", "capabilities", "Capability", "AUTOHIDEABLE", "DRAG_TARGET", "POSITIONABLE", "initFlyout", "createDom", "attachListeners", "prevConfigureContextMenu", "configureContextMenu", "menuOptions", "backpack", "getComponent", "backpackClientRect", "getClientRect", "PointerEvent", "contains", "clientX", "clientY", "length", "text", "enabled", "getCount", "callback", "empty", "scope", "push", "getItem", "displayText", "preconditionFn", "block", "ws", "isFlyout", "targetWorkspace", "backpackFlyout", "getFlyout", "getWorkspace", "removeBlock", "scopeType", "ScopeType", "BLOCK", "registerRemoveFromBackpack", "disablePreconditionContainsCheck", "containsBlock", "addBlock", "addBlocks", "getTopBlocks", "WORKSPACE", "registerCopyAllBackpack", "pasteAllFromBackpack", "backpackCount", "getContents", "forEach", "blockText", "blocks", "append", "JSON", "parse", "scheduleSnapAndBump", "registerPasteAllBackpack", "resize", "dispose", "dom", "removeNode", "unbind", "flyoutWorkspaceOptions", "scrollbars", "parentWorkspace", "rtl", "RTL", "oneBasedIndex", "renderer", "rendererOverrides", "move", "horizontalLayout", "toolboxPosition", "toolbox", "Position", "TOP", "BOTTOM", "HorizontalFlyout", "getClassFromOptions", "FLYOUTS_HORIZONTAL_TOOLBOX", "Error", "RIGHT", "LEFT", "VerticalFlyout", "FLYOUTS_VERTICAL_TOOLBOX", "parentNode", "getParentSvg", "appendChild", "t", "Svg", "SVG", "createSvgElement", "G", "rnd", "idGenerator", "genUid", "clip", "CLIPPATH", "RECT", "width", "height", "IMAGE", "setAttributeNS", "XLINK_NS", "backpackSvgDataUri", "insertAfter", "getBubbleCanvas", "addEvent", "blockMouseDownWhenOpenable", "onClick", "onMouseOver", "onMouseOut", "node", "name", "thisObject", "func", "bind", "clientRect", "getBoundingClientRect", "top", "bottom", "left", "right", "Rect", "getBoundingRectangle", "metrics", "savedPositions", "scrollbar", "hasVerticalScrollbars", "isVisible", "canScrollVertically", "hasHorizontalScrollbars", "canScrollHorizontally", "toolboxMetrics", "position", "absoluteMetrics", "viewMetrics", "scrollbarThickness", "startAtBottom", "boundingRect", "otherEl", "intersects", "setAttribute", "dragElement", "addBackpackable", "save", "kind", "traverseJson", "keys", "indexOf", "stringify", "blockXml", "startsWith", "domToBlock", "xml", "textToDom", "blockToJsonString", "containsBackpackable", "addItem", "removeBackpackable", "removeItem", "backpackable", "every", "info", "addBackpackables", "backpackables", "addItems", "map", "b", "reduce", "acc", "curr", "item", "items", "addedItems", "filterDuplicates", "unshift", "onContentChange", "itemIndex", "splice", "contents", "content", "blockXmlToJsonString", "close", "maybeRefreshFlyoutContents", "fire", "backpackFilledSvgDataUri", "array", "filter", "idx", "isOpenable", "open", "jsons", "show", "setVisible", "hide", "onlyClosePopups", "MouseEvent", "isRightButton", "uiEvent", "CLICK", "updateHoverStying", "addClass", "backpackDarken", "removeClass", "stopPropagation", "priority", "priorities", "BLOCKS", "state", "jsonStrings", "j", "setContents"]
}
