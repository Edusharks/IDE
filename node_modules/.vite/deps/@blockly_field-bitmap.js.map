{
  "version": 3,
  "sources": ["../../@blockly/field-bitmap/src/field-bitmap.ts"],
  "sourcesContent": ["/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport * as Blockly from 'blockly/core';\n\nBlockly.Msg['BUTTON_LABEL_RANDOMIZE'] = 'Randomize';\nBlockly.Msg['BUTTON_LABEL_CLEAR'] = 'Clear';\n\nexport const DEFAULT_HEIGHT = 5;\nexport const DEFAULT_WIDTH = 5;\nconst DEFAULT_PIXEL_SIZE = 15;\nconst DEFAULT_PIXEL_COLOURS: PixelColours = {\n  empty: '#fff',\n  filled: '#363d80',\n};\nconst DEFAULT_BUTTONS: Buttons = {\n  randomize: true,\n  clear: true,\n};\n/**\n * Field for inputting a small bitmap image.\n * Includes a grid of clickable pixels that's exported as a bitmap.\n */\nexport class FieldBitmap extends Blockly.Field<number[][]> {\n  private initialValue: number[][] | null = null;\n  private imgHeight: number;\n  private imgWidth: number;\n  /**\n   * Array holding info needed to unbind events.\n   * Used for disposing.\n   */\n  private boundEvents: Blockly.browserEvents.Data[] = [];\n  /** References to UI elements */\n  private editorPixels: HTMLElement[][] | null = null;\n  private blockDisplayPixels: SVGElement[][] | null = null;\n  /** Stateful variables */\n  private pointerIsDown = false;\n  private valToPaintWith?: number;\n  buttonOptions: Buttons;\n  pixelSize: number;\n  pixelColours: {empty: string; filled: string};\n  fieldHeight?: number;\n\n  /**\n   * Constructor for the bitmap field.\n   *\n   * @param value 2D rectangular array of 1s and 0s.\n   * @param validator A function that is called to validate.\n   * @param config Config A map of options used to configure the field.\n   */\n  constructor(\n    value: number[][] | typeof Blockly.Field.SKIP_SETUP,\n    validator?: Blockly.FieldValidator<number[][]>,\n    config?: FieldBitmapFromJsonConfig,\n  ) {\n    super(value, validator, config);\n\n    this.SERIALIZABLE = true;\n    this.buttonOptions = {...DEFAULT_BUTTONS, ...config?.buttons};\n    this.pixelColours = {...DEFAULT_PIXEL_COLOURS, ...config?.colours};\n\n    // Configure value, height, and width\n    const currentValue = this.getValue();\n    if (currentValue !== null) {\n      this.imgHeight = currentValue.length;\n      this.imgWidth = currentValue[0].length || 0;\n    } else {\n      this.imgHeight = config?.height ?? DEFAULT_HEIGHT;\n      this.imgWidth = config?.width ?? DEFAULT_WIDTH;\n      // Set a default empty value\n      this.setValue(this.getEmptyArray());\n    }\n    this.fieldHeight = config?.fieldHeight;\n    if (this.fieldHeight) {\n      this.pixelSize = this.fieldHeight / this.imgHeight;\n    } else {\n      this.pixelSize = DEFAULT_PIXEL_SIZE;\n    }\n  }\n\n  /**\n   * Constructs a FieldBitmap from a JSON arg object.\n   *\n   * @param options A JSON object with options.\n   * @returns The new field instance.\n   */\n  static fromJson(options: FieldBitmapFromJsonConfig) {\n    // `this` might be a subclass of FieldBitmap if that class doesn't override the static fromJson method.\n    return new this(\n      options.value ?? Blockly.Field.SKIP_SETUP,\n      undefined,\n      options,\n    );\n  }\n\n  /**\n   * Returns the width of the image in pixels.\n   *\n   * @returns The width in pixels.\n   */\n  getImageWidth() {\n    return this.imgWidth;\n  }\n\n  /**\n   * Returns the height of the image in pixels.\n   *\n   * @returns The height in pixels.\n   */\n  getImageHeight() {\n    return this.imgHeight;\n  }\n\n  /**\n   * Validates that a new value meets the requirements for a valid bitmap array.\n   *\n   * @param newValue The new value to be tested.\n   * @returns The new value if it's valid, or null.\n   */\n  // eslint-disable-next-line @typescript-eslint/naming-convention\n  protected override doClassValidation_(\n    newValue: number[][],\n  ): number[][] | null | undefined;\n  // eslint-disable-next-line @typescript-eslint/naming-convention\n  protected override doClassValidation_(\n    newValue?: number[][],\n  ): number[][] | null;\n  // eslint-disable-next-line @typescript-eslint/naming-convention\n  protected override doClassValidation_(\n    newValue?: number[][],\n  ): number[][] | null | undefined {\n    if (!newValue) {\n      return null;\n    }\n    // Check if the new value is an array\n    if (!Array.isArray(newValue)) {\n      return null;\n    }\n    const newHeight = newValue.length;\n    // The empty list is not an acceptable bitmap\n    if (newHeight == 0) {\n      return null;\n    }\n\n    // Check that the width matches the existing width of the image if it\n    // already has a value.\n    const newWidth = newValue[0].length;\n    for (const row of newValue) {\n      if (!Array.isArray(row)) {\n        return null;\n      }\n      if (row.length !== newWidth) {\n        return null;\n      }\n    }\n\n    // Check if all contents of the arrays are either 0 or 1\n    for (const row of newValue) {\n      for (const cell of row) {\n        if (cell !== 0 && cell !== 1) {\n          return null;\n        }\n      }\n    }\n    return newValue;\n  }\n\n  /**\n   * Called when a new value has been validated and is about to be set.\n   *\n   * @param newValue The value that's about to be set.\n   */\n  // eslint-disable-next-line\n  protected override doValueUpdate_(newValue: number[][]) {\n    super.doValueUpdate_(newValue);\n    if (newValue) {\n      this.imgHeight = newValue.length;\n      this.imgWidth = newValue[0] ? newValue[0].length : 0;\n      // If the field height is static, adjust the pixel size to fit.\n      if (this.fieldHeight) {\n        this.pixelSize = this.fieldHeight / this.imgHeight;\n      } else {\n        this.pixelSize = DEFAULT_PIXEL_SIZE;\n      }\n    }\n  }\n\n  /**\n   * Show the bitmap editor dialog.\n   *\n   * @param e Optional mouse event that triggered the field to open, or\n   *    undefined if triggered programmatically.\n   */\n  // eslint-disable-next-line\n  protected override showEditor_(e?: Event) {\n    const editor = this.dropdownCreate();\n    Blockly.DropDownDiv.getContentDiv().appendChild(editor);\n    Blockly.DropDownDiv.showPositionedByField(\n      this,\n      this.dropdownDispose.bind(this),\n    );\n  }\n\n  /**\n   * Updates the block display and editor dropdown when the field re-renders.\n   */\n  // eslint-disable-next-line\n  protected override render_() {\n    super.render_();\n\n    if (!this.getValue()) {\n      return;\n    }\n\n    if (this.blockDisplayPixels) {\n      this.forAllCells((r, c) => {\n        const pixel = this.getPixel(r, c);\n\n        if (this.blockDisplayPixels) {\n          this.blockDisplayPixels[r][c].style.fill = pixel\n            ? this.pixelColours.filled\n            : this.pixelColours.empty;\n        }\n        if (this.editorPixels) {\n          this.editorPixels[r][c].style.background = pixel\n            ? this.pixelColours.filled\n            : this.pixelColours.empty;\n        }\n      });\n    }\n  }\n\n  /**\n   * Determines whether the field is editable.\n   *\n   * @returns True since it is always editable.\n   */\n  override updateEditable() {\n    const editable = super.updateEditable();\n    // Blockly.Field's implementation sets these classes as appropriate, but\n    // since this field has no text they just mess up the rendering of the grid\n    // lines.\n    const svgRoot = this.getSvgRoot();\n    if (svgRoot) {\n      Blockly.utils.dom.removeClass(svgRoot, 'blocklyNonEditableField');\n      Blockly.utils.dom.removeClass(svgRoot, 'blocklyEditableField');\n    }\n    return editable;\n  }\n\n  /**\n   * Gets the rectangle built out of dimensions matching SVG's <g> element.\n   *\n   * @returns The newly created rectangle of same size as the SVG element.\n   */\n  override getScaledBBox() {\n    const boundingBox = this.getSvgRoot()?.getBoundingClientRect();\n    if (!boundingBox) {\n      throw new Error('Tried to retrieve a bounding box without a rect');\n    }\n    return new Blockly.utils.Rect(\n      boundingBox.top,\n      boundingBox.bottom,\n      boundingBox.left,\n      boundingBox.right,\n    );\n  }\n\n  /**\n   * Creates the bitmap editor and add event listeners.\n   *\n   * @returns The newly created dropdown menu.\n   */\n  private dropdownCreate() {\n    const dropdownEditor = this.createElementWithClassname(\n      'div',\n      'dropdownEditor',\n    );\n    if (this.buttonOptions.randomize || this.buttonOptions.clear) {\n      dropdownEditor.classList.add('has-buttons');\n    }\n    const pixelContainer = this.createElementWithClassname(\n      'div',\n      'pixelContainer',\n    );\n    dropdownEditor.appendChild(pixelContainer);\n\n    // This prevents the normal max-height from adding a scroll bar for large images.\n    Blockly.DropDownDiv.getContentDiv().classList.add('contains-bitmap-editor');\n\n    this.bindEvent(dropdownEditor, 'pointermove', this.onPointerMove);\n    this.bindEvent(dropdownEditor, 'pointerup', this.onPointerEnd);\n    this.bindEvent(dropdownEditor, 'pointerleave', this.onPointerEnd);\n    this.bindEvent(dropdownEditor, 'pointerdown', this.onPointerStart);\n    this.bindEvent(dropdownEditor, 'pointercancel', this.onPointerEnd);\n    // Stop the browser from handling touch events and cancelling the event.\n    this.bindEvent(dropdownEditor, 'touchmove', (e: Event) => {\n      e.preventDefault();\n    });\n\n    this.editorPixels = [];\n    for (let r = 0; r < this.imgHeight; r++) {\n      this.editorPixels.push([]);\n      const rowDiv = this.createElementWithClassname('div', 'pixelRow');\n      for (let c = 0; c < this.imgWidth; c++) {\n        // Add the button to the UI and save a reference to it\n        const button = this.createElementWithClassname('div', 'pixelButton');\n        this.editorPixels[r].push(button);\n        rowDiv.appendChild(button);\n\n        // Load the current pixel colour\n        const isOn = this.getPixel(r, c);\n        button.style.background = isOn\n          ? this.pixelColours.filled\n          : this.pixelColours.empty;\n\n        // Set the custom data attributes for row and column indices\n        button.setAttribute('data-row', r.toString());\n        button.setAttribute('data-col', c.toString());\n      }\n      pixelContainer.appendChild(rowDiv);\n    }\n\n    // Add control buttons below the pixel grid\n    if (this.buttonOptions.randomize) {\n      this.addControlButton(\n        dropdownEditor,\n        Blockly.Msg['BUTTON_LABEL_RANDOMIZE'],\n        this.randomizePixels,\n      );\n    }\n    if (this.buttonOptions.clear) {\n      this.addControlButton(\n        dropdownEditor,\n        Blockly.Msg['BUTTON_LABEL_CLEAR'],\n        this.clearPixels,\n      );\n    }\n\n    if (this.blockDisplayPixels) {\n      this.forAllCells((r, c) => {\n        const pixel = this.getPixel(r, c);\n        if (this.editorPixels) {\n          this.editorPixels[r][c].style.background = pixel\n            ? this.pixelColours.filled\n            : this.pixelColours.empty;\n        }\n      });\n    }\n\n    // Store the initial value at the start of the edit.\n    this.initialValue = this.getValue();\n\n    return dropdownEditor;\n  }\n\n  /**\n   * Initializes the on-block display.\n   */\n  override initView() {\n    this.blockDisplayPixels = [];\n    for (let r = 0; r < this.imgHeight; r++) {\n      const row = [];\n      for (let c = 0; c < this.imgWidth; c++) {\n        const square = Blockly.utils.dom.createSvgElement(\n          'rect',\n          {\n            x: c * this.pixelSize,\n            y: r * this.pixelSize,\n            width: this.pixelSize,\n            height: this.pixelSize,\n            fill: this.pixelColours.empty,\n            fill_opacity: 1, // eslint-disable-line\n          },\n          this.getSvgRoot(),\n        );\n        row.push(square);\n      }\n      this.blockDisplayPixels.push(row);\n    }\n  }\n\n  /**\n   * Updates the size of the block based on the size of the underlying image.\n   */\n  // eslint-disable-next-line\n  protected override updateSize_() {\n    {\n      const newWidth = this.pixelSize * this.imgWidth;\n      const newHeight = this.pixelSize * this.imgHeight;\n      if (this.borderRect_) {\n        this.borderRect_.setAttribute('width', String(newWidth));\n        this.borderRect_.setAttribute('height', String(newHeight));\n      }\n\n      this.size_.width = newWidth;\n      this.size_.height = newHeight;\n    }\n  }\n\n  /**\n   * Create control button.\n   *\n   * @param parent Parent HTML element to which control button will be added.\n   * @param buttonText Text of the control button.\n   * @param onClick Callback that will be attached to the control button.\n   */\n  private addControlButton(\n    parent: HTMLElement,\n    buttonText: string,\n    onClick: () => void,\n  ) {\n    const button = this.createElementWithClassname('button', 'controlButton');\n    button.innerText = buttonText;\n    parent.appendChild(button);\n    this.bindEvent(button, 'click', onClick);\n  }\n\n  /**\n   * Disposes of events belonging to the bitmap editor.\n   */\n  private dropdownDispose() {\n    if (\n      this.getSourceBlock() &&\n      this.initialValue !== null &&\n      this.initialValue !== this.getValue()\n    ) {\n      Blockly.Events.fire(\n        new (Blockly.Events.get(Blockly.Events.BLOCK_CHANGE))(\n          this.sourceBlock_,\n          'field',\n          this.name || null,\n          this.initialValue,\n          this.getValue(),\n        ),\n      );\n    }\n\n    for (const event of this.boundEvents) {\n      Blockly.browserEvents.unbind(event);\n    }\n    this.boundEvents.length = 0;\n    this.editorPixels = null;\n    // Set this.initialValue back to null.\n    this.initialValue = null;\n\n    Blockly.DropDownDiv.getContentDiv().classList.remove(\n      'contains-bitmap-editor',\n    );\n  }\n\n  /**\n   * Constructs an array of zeros with the specified width and height.\n   *\n   * @returns The new value.\n   */\n  private getEmptyArray(): number[][] {\n    const newVal: number[][] = [];\n    for (let r = 0; r < this.imgHeight; r++) {\n      newVal.push([]);\n      for (let c = 0; c < this.imgWidth; c++) {\n        newVal[r].push(0);\n      }\n    }\n    return newVal;\n  }\n\n  /**\n   * Checks if a down event is on a pixel in this editor and if it is starts an\n   * edit gesture.\n   *\n   * @param e The down event.\n   */\n  private onPointerStart(e: PointerEvent) {\n    const currentElement = document.elementFromPoint(e.clientX, e.clientY);\n    const rowIndex = currentElement?.getAttribute('data-row');\n    const colIndex = currentElement?.getAttribute('data-col');\n    if (rowIndex && colIndex) {\n      this.onPointerDownInPixel(parseInt(rowIndex), parseInt(colIndex));\n      this.pointerIsDown = true;\n      e.preventDefault();\n    }\n  }\n\n  /**\n   * Updates the editor if we're in an edit gesture and the pointer is over a\n   * pixel.\n   *\n   * @param e The move event.\n   */\n  private onPointerMove(e: PointerEvent) {\n    if (!this.pointerIsDown) {\n      return;\n    }\n    const currentElement = document.elementFromPoint(e.clientX, e.clientY);\n    const rowIndex = currentElement?.getAttribute('data-row');\n    const colIndex = currentElement?.getAttribute('data-col');\n    if (rowIndex && colIndex) {\n      this.updatePixelValue(parseInt(rowIndex), parseInt(colIndex));\n    }\n    e.preventDefault();\n  }\n\n  /**\n   * Starts an interaction with the bitmap dropdown when there's a pointerdown\n   * within one of the pixels in the editor.\n   *\n   * @param r Row number of grid.\n   * @param c Column number of grid.\n   */\n  private onPointerDownInPixel(r: number, c: number) {\n    // Toggle that pixel to the opposite of its value\n    const newPixelValue = 1 - this.getPixel(r, c);\n    this.setPixel(r, c, newPixelValue);\n    this.pointerIsDown = true;\n    this.valToPaintWith = newPixelValue;\n  }\n\n  /**\n   * Sets the specified pixel in the editor to the current value being painted.\n   *\n   * @param r Row number of grid.\n   * @param c Column number of grid.\n   */\n  private updatePixelValue(r: number, c: number) {\n    if (\n      this.valToPaintWith !== undefined &&\n      this.getPixel(r, c) !== this.valToPaintWith\n    ) {\n      this.setPixel(r, c, this.valToPaintWith);\n    }\n  }\n\n  /**\n   * Resets pointer state (e.g. After either a pointerup event or if the\n   * gesture is canceled).\n   */\n  private onPointerEnd() {\n    this.pointerIsDown = false;\n    this.valToPaintWith = undefined;\n  }\n\n  /**\n   * Sets all the pixels in the image to a random value.\n   */\n  private randomizePixels() {\n    const getRandBinary = () => Math.floor(Math.random() * 2);\n    this.forAllCells((r, c) => {\n      this.setPixel(r, c, getRandBinary());\n    });\n  }\n\n  /**\n   * Sets all the pixels to 0.\n   */\n  private clearPixels() {\n    const cleared = this.getEmptyArray();\n    this.fireIntermediateChangeEvent(cleared);\n    this.setValue(cleared, false);\n  }\n\n  /**\n   * Sets the value of a particular pixel.\n   *\n   * @param r Row number of grid.\n   * @param c Column number of grid.\n   * @param newValue Value of the pixel.\n   */\n  private setPixel(r: number, c: number, newValue: number) {\n    const newGrid = JSON.parse(JSON.stringify(this.getValue()));\n    newGrid[r][c] = newValue;\n    this.fireIntermediateChangeEvent(newGrid);\n    this.setValue(newGrid, false);\n  }\n\n  private getPixel(row: number, column: number): number {\n    const value = this.getValue();\n    if (!value) {\n      throw new Error(\n        'Attempted to retrieve a pixel value when no value is set',\n      );\n    }\n\n    return value[row][column];\n  }\n\n  /**\n   * Calls a given function for all cells in the image, with the cell\n   * coordinates as the arguments.\n   *\n   * @param func A function to be applied.\n   */\n  private forAllCells(func: (row: number, col: number) => void) {\n    for (let r = 0; r < this.imgHeight; r++) {\n      for (let c = 0; c < this.imgWidth; c++) {\n        func(r, c);\n      }\n    }\n  }\n\n  /**\n   * Creates a new element with the specified type and class.\n   *\n   * @param elementType Type of html element.\n   * @param className ClassName of html element.\n   * @returns The created element.\n   */\n  private createElementWithClassname(elementType: string, className: string) {\n    const newElt = document.createElement(elementType);\n    newElt.className = className;\n    return newElt;\n  }\n\n  /**\n   * Binds an event listener to the specified element.\n   *\n   * @param element Specified element.\n   * @param eventName Name of the event to bind.\n   * @param callback Function to be called on specified event.\n   */\n  private bindEvent(\n    element: HTMLElement,\n    eventName: string,\n    callback: (e: PointerEvent) => void,\n  ) {\n    this.boundEvents.push(\n      Blockly.browserEvents.bind(element, eventName, this, callback),\n    );\n  }\n\n  private fireIntermediateChangeEvent(newValue: number[][]) {\n    if (this.getSourceBlock()) {\n      Blockly.Events.fire(\n        new (Blockly.Events.get(\n          Blockly.Events.BLOCK_FIELD_INTERMEDIATE_CHANGE,\n        ))(this.getSourceBlock(), this.name || null, this.getValue(), newValue),\n      );\n    }\n  }\n}\n\ninterface Buttons {\n  readonly randomize: boolean;\n  readonly clear: boolean;\n}\ninterface PixelColours {\n  readonly empty: string;\n  readonly filled: string;\n}\n\nexport interface FieldBitmapFromJsonConfig extends Blockly.FieldConfig {\n  value?: number[][];\n  width?: number;\n  height?: number;\n  buttons?: Buttons;\n  fieldHeight?: number;\n  colours?: PixelColours;\n}\n\nBlockly.fieldRegistry.register('field_bitmap', FieldBitmap);\n\n/**\n * CSS for bitmap field.\n */\nBlockly.Css.register(`\n.dropdownEditor {\n  align-items: center;\n  flex-direction: column;\n  display: flex;\n  justify-content: center;\n}\n.dropdownEditor.has-buttons {\n  margin-bottom: 20px;\n}\n.pixelContainer {\n  margin: 20px;\n}\n.pixelRow {\n  display: flex;\n  flex-direction: row;\n  padding: 0;\n  margin: 0;\n  height: ${DEFAULT_PIXEL_SIZE}\n}\n.pixelButton {\n  width: ${DEFAULT_PIXEL_SIZE}px;\n  height: ${DEFAULT_PIXEL_SIZE}px;\n  border: 1px solid #000;\n}\n.pixelDisplay {\n  white-space:pre-wrap;\n}\n.controlButton {\n  margin: 5px 0;\n}\n.blocklyDropDownContent.contains-bitmap-editor {\n  max-height: none;\n}\n`);\n"],
  "mappings": "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",
  "names": []
}
