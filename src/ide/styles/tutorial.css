/* src/ide/styles/tutorial.css */

/* --- PANEL CONTAINER --- */
#tutorial-panel {
    background-color: var(--bg-sidebar);
    border-left: 1px solid var(--border-color);
    display: none; /* Hidden by default */
    flex-direction: column;
    z-index: 900;
    transition: width 0.3s ease, height 0.3s ease, top 0.3s ease, left 0.3s ease;
    overflow: hidden;
}

/* --- MODE: DOCKED (Default) --- */
.ide-container.tutorial-active {
    /* Adjust grid to make room for tutorial on the right */
    grid-template-columns: var(--sidebar-width, 400px) 4px 1fr 350px; 
}

#tutorial-panel.docked {
    grid-column: 4 / 5;
    grid-row: 2 / 3;
    width: 100%;
    height: 100%;
    border-left: 1px solid var(--border-color);
}

/* --- MODE: FLOATING --- */
#tutorial-panel.floating {
    position: absolute;
    top: 80px;
    right: 20px;
    width: 400px;
    height: 600px;
    border-radius: var(--radius);
    box-shadow: var(--shadow-xl);
    border: 1px solid var(--border-color);
    resize: both; /* Allow user resizing */
    overflow: hidden;
}

/* --- HEADER --- */
.tut-header {
    padding: 12px 16px;
    background-color: var(--bg-header);
    border-bottom: 1px solid var(--border-color);
    display: flex;
    justify-content: space-between;
    align-items: center;
    cursor: grab; /* For dragging in float mode */
}
.tut-title { font-weight: 800; font-size: 0.9rem; color: var(--text-primary); }
.tut-controls { display: flex; gap: 8px; }
.tut-btn {
    background: none; border: none; color: var(--text-secondary); cursor: pointer;
    padding: 4px; border-radius: 4px; display: flex; align-items: center;
}
.tut-btn:hover { background-color: var(--bg-inset); color: var(--text-primary); }

/* --- CONTENT AREA --- */
.tut-content {
    flex-grow: 1;
    padding: 20px;
    overflow-y: auto;
    font-family: var(--ui-font);
    color: var(--text-primary);
}

/* Content Typography */
.tut-step-h1 { font-size: 1.4rem; font-weight: 800; margin-bottom: 1rem; color: var(--accent-primary); }
.tut-step-p { font-size: 0.95rem; line-height: 1.6; margin-bottom: 1rem; color: var(--text-secondary); }
.tut-img { max-width: 100%; border-radius: 8px; border: 1px solid var(--border-color); margin-bottom: 1rem; }
.tut-code { 
    background: var(--bg-code); padding: 10px; border-radius: 6px; 
    font-family: var(--code-font); font-size: 0.85rem; color: var(--text-code); 
    border-left: 3px solid var(--accent-warning); margin-bottom: 1rem;
}

/* Quiz Styles */
.tut-quiz { background: var(--bg-inset); padding: 15px; border-radius: 8px; margin-bottom: 1rem; border: 1px solid var(--border-color); }
.tut-quiz h4 { margin: 0 0 10px 0; font-size: 1rem; }
.tut-quiz-opt { 
    display: block; padding: 8px 12px; margin-bottom: 5px; 
    background: var(--bg-sidebar); border: 1px solid var(--border-color); 
    border-radius: 6px; cursor: pointer; transition: all 0.2s;
}
.tut-quiz-opt:hover { border-color: var(--accent-primary); }
.tut-quiz-opt.correct { background-color: rgba(var(--accent-success-rgb), 0.1); border-color: var(--accent-success); color: var(--accent-success); }
.tut-quiz-opt.wrong { background-color: rgba(var(--accent-error-rgb), 0.1); border-color: var(--accent-error); }

/* Validation Box */
.tut-validation {
    margin-top: 20px;
    padding: 15px;
    background: rgba(var(--accent-primary-rgb), 0.1);
    border: 1px solid var(--accent-primary);
    border-radius: 8px;
    text-align: center;
}
.tut-validation.success {
    background: rgba(var(--accent-success-rgb), 0.1);
    border-color: var(--accent-success);
    color: var(--accent-success);
}/* src/ide/styles/tutorial.css */

/* --- PANEL CONTAINER --- */
#tutorial-panel {
    background-color: var(--bg-sidebar);
    border-left: 1px solid var(--border-color);
    display: none; /* Hidden by default */
    flex-direction: column;
    z-index: 2000; /* Increased to be above Blockly (approx 70) and Sim (100) */
    transition: none; /* Disable transition during drag to prevent lag */
    overflow: hidden;
    min-width: 300px;
}

/* --- MODE: DOCKED RIGHT (Default) --- */
.ide-container.tutorial-active {
    /* Col 1: Sidebar, Col 2: Resizer, Col 3: Workspace, Col 4: Tutorial */
    grid-template-columns: var(--sidebar-width, 400px) 4px 1fr 350px; 
}

#tutorial-panel.docked {
    grid-column: 4 / 5;
    grid-row: 2 / 3;
    width: 100% !important; /* Force width reset */
    height: 100% !important; /* Force height reset */
    border-left: 1px solid var(--border-color);
    border-right: none;
    position: relative !important; /* Ensure grid takes over */
    top: auto !important;
    left: auto !important;
    box-shadow: none;
}

/* --- MODE: DOCKED LEFT --- */
.ide-container.tutorial-active.tut-left {
    /* 
       Layout: Tutorial | Resizer | Workspace 
       Reuses '--sidebar-width' so the drag handle resizes the tutorial.
    */
    grid-template-columns: var(--sidebar-width, 350px) 4px 1fr;
}

/* 1. Place Tutorial in Col 1 */
.ide-container.tut-left #tutorial-panel.docked {
    grid-column: 1 / 2;
    border-right: 1px solid var(--border-color);
    border-left: none;
    z-index: 50;
}

/* 2. Place Resizer in Col 2 */
.ide-container.tut-left #layout-resizer {
    grid-column: 2 / 3;
    display: flex !important;
}

/* 3. Place Workspace in Col 3 */
.ide-container.tut-left .main-content {
    grid-column: 3 / 4;
}

/* 4. HIDE Sidebar ONLY in Normal Mode (Code Focus) */
/* This is the Critical Fix: :not(.fullscreen-sim) */
.ide-container.tut-left:not(.fullscreen-sim) .left-sidebar {
    display: none !important;
}

/* --- MODE: FLOATING --- */
#tutorial-panel.floating {
    position: fixed !important; /* Fixed ensures it stays relative to viewport, not grid */
    border-radius: var(--radius);
    box-shadow: 0 10px 40px rgba(0,0,0,0.5); /* Stronger shadow */
    border: 1px solid var(--accent-primary);
    resize: both; 
    overflow: hidden;
    /* Default Float Size - logic handles actual values */
    width: 400px; 
    height: 600px;
}

/* --- HEADER --- */
.tut-header {
    padding: 12px 16px;
    background-color: var(--bg-header);
    border-bottom: 1px solid var(--border-color);
    display: flex;
    justify-content: space-between;
    align-items: center;
    cursor: grab; 
    user-select: none; /* Critical for dragging */
}
.tut-header:active {
    cursor: grabbing;
}

.tut-title { font-weight: 800; font-size: 0.9rem; color: var(--text-primary); }
.tut-controls { display: flex; gap: 8px; }
.tut-btn {
    background: none; border: none; color: var(--text-secondary); cursor: pointer;
    padding: 4px; border-radius: 4px; display: flex; align-items: center;
}
.tut-btn:hover { background-color: var(--bg-inset); color: var(--text-primary); }

/* --- CONTENT AREA --- */
.tut-content {
    flex-grow: 1;
    padding: 20px;
    overflow-y: auto;
    font-family: var(--ui-font);
    color: var(--text-primary);
    background-color: var(--bg-sidebar);
}

/* Typography & Interactive elements... (Keep existing styles below) */
.tut-step-h1 { font-size: 1.4rem; font-weight: 800; margin-bottom: 1rem; color: var(--accent-primary); }
.tut-step-p { font-size: 0.95rem; line-height: 1.6; margin-bottom: 1rem; color: var(--text-secondary); }
.tut-img { max-width: 100%; border-radius: 8px; border: 1px solid var(--border-color); margin-bottom: 1rem; }
.tut-code { 
    background: var(--bg-code); padding: 10px; border-radius: 6px; 
    font-family: var(--code-font); font-size: 0.85rem; color: var(--text-code); 
    border-left: 3px solid var(--accent-warning); margin-bottom: 1rem;
    white-space: pre-wrap;
}

.tut-quiz { background: var(--bg-inset); padding: 15px; border-radius: 8px; margin-bottom: 1rem; border: 1px solid var(--border-color); }
.tut-quiz h4 { margin: 0 0 10px 0; font-size: 1rem; }
.tut-quiz-opt { 
    display: block; width: 100%; text-align: left; padding: 8px 12px; margin-bottom: 5px; 
    background: var(--bg-sidebar); border: 1px solid var(--border-color); 
    border-radius: 6px; cursor: pointer; transition: all 0.2s; color: var(--text-primary);
}
.tut-quiz-opt:hover { border-color: var(--accent-primary); }
.tut-quiz-opt.correct { background-color: rgba(var(--accent-success-rgb), 0.1); border-color: var(--accent-success); color: var(--accent-success); }
.tut-quiz-opt.wrong { background-color: rgba(var(--accent-error-rgb), 0.1); border-color: var(--accent-error); }

.tut-validation {
    margin-top: 20px; padding: 15px;
    background: rgba(var(--accent-primary-rgb), 0.1);
    border: 1px solid var(--accent-primary);
    border-radius: 8px; text-align: center;
}
.tut-validation.success {
    background: rgba(var(--accent-success-rgb), 0.1);
    border-color: var(--accent-success); color: var(--accent-success);/* src/ide/styles/tutorial.css */

/* --- PANEL CONTAINER --- */
#tutorial-panel {
    background-color: var(--bg-sidebar);
    border-left: 1px solid var(--border-color);
    display: none; /* Hidden by default */
    flex-direction: column;
    z-index: 2000; /* Increased to be above Blockly (approx 70) and Sim (100) */
    transition: none; /* Disable transition during drag to prevent lag */
    overflow: hidden;
    min-width: 300px;
}

/* --- MODE: DOCKED RIGHT (Default) --- */
.ide-container.tutorial-active {
    /* Col 1: Sidebar, Col 2: Resizer, Col 3: Workspace, Col 4: Tutorial */
    grid-template-columns: var(--sidebar-width, 400px) 4px 1fr 350px; 
}

#tutorial-panel.docked {
    grid-column: 4 / 5;
    grid-row: 2 / 3;
    width: 100% !important; /* Force width reset */
    height: 100% !important; /* Force height reset */
    border-left: 1px solid var(--border-color);
    border-right: none;
    position: relative !important; /* Ensure grid takes over */
    top: auto !important;
    left: auto !important;
    box-shadow: none;
}

/* --- MODE: DOCKED LEFT --- */
.ide-container.tutorial-active.tut-left {
    /* Col 1: Tutorial, Col 2: Sidebar, Col 3: Resizer, Col 4: Workspace */
    grid-template-columns: 350px var(--sidebar-width, 400px) 4px 1fr;
}

.ide-container.tut-left #tutorial-panel.docked {
    grid-column: 1 / 2;
    border-right: 1px solid var(--border-color);
    border-left: none;
}

/* Adjust standard sidebar position when tutorial is on the left */
.ide-container.tut-left .left-sidebar {
    grid-column: 2 / 3; 
}
.ide-container.tut-left #layout-resizer {
    grid-column: 3 / 4;
}
.ide-container.tut-left .main-content {
    grid-column: 4 / 5;
}

/* --- MODE: FLOATING --- */
#tutorial-panel.floating {
    position: fixed !important; /* Fixed ensures it stays relative to viewport, not grid */
    border-radius: var(--radius);
    box-shadow: 0 10px 40px rgba(0,0,0,0.5); /* Stronger shadow */
    border: 1px solid var(--accent-primary);
    resize: both; 
    overflow: hidden;
    /* Default Float Size - logic handles actual values */
    width: 400px; 
    height: 600px;
}

/* --- HEADER --- */
.tut-header {
    padding: 12px 16px;
    background-color: var(--bg-header);
    border-bottom: 1px solid var(--border-color);
    display: flex;
    justify-content: space-between;
    align-items: center;
    cursor: grab; 
    user-select: none; /* Critical for dragging */
}
.tut-header:active {
    cursor: grabbing;
}

.tut-title { font-weight: 800; font-size: 0.9rem; color: var(--text-primary); }
.tut-controls { display: flex; gap: 8px; }
.tut-btn {
    background: none; border: none; color: var(--text-secondary); cursor: pointer;
    padding: 4px; border-radius: 4px; display: flex; align-items: center;
}
.tut-btn:hover { background-color: var(--bg-inset); color: var(--text-primary); }

/* --- CONTENT AREA --- */
.tut-content {
    flex-grow: 1;
    padding: 20px;
    overflow-y: auto;
    font-family: var(--ui-font);
    color: var(--text-primary);
    background-color: var(--bg-sidebar);
}

/* Typography & Interactive elements... (Keep existing styles below) */
.tut-step-h1 { font-size: 1.4rem; font-weight: 800; margin-bottom: 1rem; color: var(--accent-primary); }
.tut-step-p { font-size: 0.95rem; line-height: 1.6; margin-bottom: 1rem; color: var(--text-secondary); }
.tut-img { max-width: 100%; border-radius: 8px; border: 1px solid var(--border-color); margin-bottom: 1rem; }
.tut-code { 
    background: var(--bg-code); padding: 10px; border-radius: 6px; 
    font-family: var(--code-font); font-size: 0.85rem; color: var(--text-code); 
    border-left: 3px solid var(--accent-warning); margin-bottom: 1rem;
    white-space: pre-wrap;
}

.tut-quiz { background: var(--bg-inset); padding: 15px; border-radius: 8px; margin-bottom: 1rem; border: 1px solid var(--border-color); }
.tut-quiz h4 { margin: 0 0 10px 0; font-size: 1rem; }
.tut-quiz-opt { 
    display: block; width: 100%; text-align: left; padding: 8px 12px; margin-bottom: 5px; 
    background: var(--bg-sidebar); border: 1px solid var(--border-color); 
    border-radius: 6px; cursor: pointer; transition: all 0.2s; color: var(--text-primary);
}
.tut-quiz-opt:hover { border-color: var(--accent-primary); }
.tut-quiz-opt.correct { background-color: rgba(var(--accent-success-rgb), 0.1); border-color: var(--accent-success); color: var(--accent-success); }
.tut-quiz-opt.wrong { background-color: rgba(var(--accent-error-rgb), 0.1); border-color: var(--accent-error); }

.tut-validation {
    margin-top: 20px; padding: 15px;
    background: rgba(var(--accent-primary-rgb), 0.1);
    border: 1px solid var(--accent-primary);
    border-radius: 8px; text-align: center;
}
.tut-validation.success {
    background: rgba(var(--accent-success-rgb), 0.1);
    border-color: var(--accent-success); color: var(--accent-success);
}

.tut-footer {
    padding: 15px;
    border-top: 1px solid var(--border-color);
    display: flex;
    justify-content: space-between;
    background-color: var(--bg-header);
}
.tut-progress { font-size: 0.8rem; color: var(--text-tertiary); align-self: center; }
}

.tut-footer {
    padding: 15px;
    border-top: 1px solid var(--border-color);
    display: flex;
    justify-content: space-between;
    background-color: var(--bg-header);
}
.tut-progress { font-size: 0.8rem; color: var(--text-tertiary); align-self: center; }

/* --- FOOTER (Navigation) --- */
.tut-footer {
    padding: 15px;
    border-top: 1px solid var(--border-color);
    display: flex;
    justify-content: space-between;
    background-color: var(--bg-header);
}
.tut-progress { font-size: 0.8rem; color: var(--text-tertiary); align-self: center; }